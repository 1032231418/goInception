{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4ecb\u7ecd goInception\u662f\u4e00\u4e2a\u96c6\u5ba1\u6838\u3001\u6267\u884c\u3001\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u4e8e\u4e00\u8eab\u7684MySQL\u8fd0\u7ef4\u5de5\u5177\uff0c \u901a\u8fc7\u5bf9\u6267\u884cSQL\u7684\u8bed\u6cd5\u89e3\u6790\uff0c\u8fd4\u56de\u57fa\u4e8e\u81ea\u5b9a\u4e49\u89c4\u5219\u7684\u5ba1\u6838\u7ed3\u679c\uff0c\u5e76\u63d0\u4f9b\u6267\u884c\u548c\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u7684\u529f\u80fd\u3002 \u67b6\u6784 \u4f7f\u7528\u65b9\u5f0f goInception\u5ef6\u7528inception\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5728\u5ba1\u6838\u7684sql\u5f00\u59cb\u524d\u6dfb\u52a0\u6ce8\u91ca\u6765\u6307\u5b9a\u8fdc\u7aef\u670d\u52a1\u5668\uff0c\u5e76\u5728sql\u7684\u524d\u540e\u6dfb\u52a0\u7279\u6b8a\u6807\u8bc6\u4ee5\u533a\u5206\u5f85\u5ba1\u6838\u8bed\u53e5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit; \u81f4\u8c22 goInception\u57fa\u4e8eTiDB\u7684\u8bed\u6cd5\u89e3\u6790\u5668\uff0c\u548c\u4e1a\u5185\u6709\u540d\u7684inpcetion\u5ba1\u6838\u5de5\u5177\u91cd\u6784\u3002 Inception - \u5ba1\u6838\u5de5\u5177 TiDB","title":"\u4ecb\u7ecd"},{"location":"#_1","text":"goInception\u662f\u4e00\u4e2a\u96c6\u5ba1\u6838\u3001\u6267\u884c\u3001\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u4e8e\u4e00\u8eab\u7684MySQL\u8fd0\u7ef4\u5de5\u5177\uff0c \u901a\u8fc7\u5bf9\u6267\u884cSQL\u7684\u8bed\u6cd5\u89e3\u6790\uff0c\u8fd4\u56de\u57fa\u4e8e\u81ea\u5b9a\u4e49\u89c4\u5219\u7684\u5ba1\u6838\u7ed3\u679c\uff0c\u5e76\u63d0\u4f9b\u6267\u884c\u548c\u5907\u4efd\u53ca\u751f\u6210\u56de\u6eda\u8bed\u53e5\u7684\u529f\u80fd\u3002","title":"\u4ecb\u7ecd"},{"location":"#_2","text":"","title":"\u67b6\u6784"},{"location":"#_3","text":"goInception\u5ef6\u7528inception\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5728\u5ba1\u6838\u7684sql\u5f00\u59cb\u524d\u6dfb\u52a0\u6ce8\u91ca\u6765\u6307\u5b9a\u8fdc\u7aef\u670d\u52a1\u5668\uff0c\u5e76\u5728sql\u7684\u524d\u540e\u6dfb\u52a0\u7279\u6b8a\u6807\u8bc6\u4ee5\u533a\u5206\u5f85\u5ba1\u6838\u8bed\u53e5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit;","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"#_4","text":"goInception\u57fa\u4e8eTiDB\u7684\u8bed\u6cd5\u89e3\u6790\u5668\uff0c\u548c\u4e1a\u5185\u6709\u540d\u7684inpcetion\u5ba1\u6838\u5de5\u5177\u91cd\u6784\u3002 Inception - \u5ba1\u6838\u5de5\u5177 TiDB","title":"\u81f4\u8c22"},{"location":"backup/","text":"\u5907\u4efd\u529f\u80fd\u8bf4\u660e goInception\u81ea\u5e26\u5907\u4efd\u529f\u80fd\uff0c\u9996\u5148\u670d\u52a1\u542f\u52a8\u65f6\u914d\u7f6econfig.toml \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e backup_host \"\" string \u5907\u4efd\u6570\u636e\u5e93IP\u5730\u5740 backup_port 0 int \u5907\u4efd\u6570\u636e\u5e93\u7aef\u53e3 backup_user \"\" string \u5907\u4efd\u6570\u636e\u5e93\u7528\u6237\u540d backup_password \"\" string \u5907\u4efd\u6570\u636e\u5e93\u5bc6\u7801 \u5e76\u4e14\u5728\u6267\u884csql\u65f6\uff0c\u6dfb\u52a0 --backup=true \u9009\u9879 /*--user=root;--password=root;--host=127.0.0.1;--port=3306;--execute=1;--backup=1;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit; \u5907\u4efd\u529f\u80fd\u5199\u5165\u89c4\u5219 \u5728\u5907\u4efd\u670d\u52a1\u5668\u4e0a\uff0c\u5907\u4efd\u5e93\u7684\u547d\u540d\u683c\u5f0f\u4e3a\uff1a IP_PORT_\u5e93\u540d \uff0c\u4f8b\u5982 127_0_0_1_3306_test \u5728\u5907\u4efd\u5e93\u4e0a\u521b\u5efa\u5907\u4efd\u4fe1\u606f\u8868 $_$Inception_backup_information$_$ \uff0c\u7528\u6765\u4fdd\u5b58\u8be5\u5e93\u7684\u6267\u884c\u4fe1\u606f\u548c\u56de\u6eda\u8bed\u53e5\u4fe1\u606f \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e opid_time varchar(50) \u6267\u884c\u64cd\u4f5cID,\u683c\u5f0f\u4e3a \u65f6\u95f4\u6233_\u7ebf\u7a0b\u53f7_\u6267\u884c\u5e8f\u53f7 start_binlog_file varchar(512) \u8d77\u59cbbinlog\u6587\u4ef6 start_binlog_pos int(11) \u8d77\u59cbbinlog\u4f4d\u7f6e end_binlog_file varchar(512) \u7ec8\u6b62binlog\u6587\u4ef6 end_binlog_pos int(11) \u7ec8\u6b62binlog\u4f4d\u7f6e sql_statement text \u6267\u884cSQL host varchar(64) \u6267\u884cIP\u5730\u5740 dbname varchar(64) \u6267\u884c\u5e93\u540d tablename varchar(64) \u6267\u884c\u8868\u540d port int(11) \u6267\u884c\u7aef\u53e3 time timestamp \u6267\u884c\u65f6\u95f4 type varchar(20) \u64cd\u4f5c\u7c7b\u578b \u5728\u5907\u4efd\u5e93\u6709\u548c\u64cd\u4f5c\u8868\u76f8\u540c\u7684\u8868\u540d\uff0c\u5176\u8868\u7ed3\u6784\u7edf\u4e00\u4e3a\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e id bigint \u81ea\u589e\u4e3b\u952e rollback_statement mediumtext \u56de\u6eda\u8bed\u53e5 opid_time varchar(50) \u5173\u8054\u6267\u884c\u64cd\u4f5cID \u5907\u4efd\u529f\u80fd\u8be6\u7ec6\u6b65\u9aa4 \u914d\u7f6e\u5907\u4efd\u6570\u636e\u5e93\uff0c\u5e76\u5728\u6267\u884cSQl\u65f6\u5f00\u542f\u5907\u4efd\u529f\u80fd \u5728\u6267\u884cSQL\u524d\u8bb0\u5f55binlog\u4f4d\u7f6e\u548c\u7ebf\u7a0b\u53f7(\u9010\u6761\u6267\u884c\u9010\u6761\u8bb0\u5f55) \u6267\u884cSQL \u5728\u6267\u884cSQL\u540e\u8bb0\u5f55binlog\u4f4d\u7f6e\u548c\u7ebf\u7a0b\u53f7 \u5f00\u59cb\u5907\u4efd\uff0c\u89e3\u6790\u8fdc\u7a0b\u670d\u52a1\u5668binlog \u5728\u5907\u4efd\u670d\u52a1\u5668\u521b\u5efa\u5907\u4efd\u5e93 \u521b\u5efa\u5907\u4efd\u4fe1\u606f\u8868\uff0c\u5199\u5165\u6267\u884c\u4fe1\u606f\u548cbinlog\u4f4d\u7f6e\u4fe1\u606f \u521b\u5efa\u5907\u4efd\u8868\uff0c \u9010\u6b65\u89e3\u6790binlog\uff0c\u5e76\u751f\u6210\u56de\u6eda\u8bed\u53e5\uff0c\u5199\u5165\u5907\u4efd\u8868","title":"\u5907\u4efd\u529f\u80fd"},{"location":"backup/#_1","text":"goInception\u81ea\u5e26\u5907\u4efd\u529f\u80fd\uff0c\u9996\u5148\u670d\u52a1\u542f\u52a8\u65f6\u914d\u7f6econfig.toml \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e backup_host \"\" string \u5907\u4efd\u6570\u636e\u5e93IP\u5730\u5740 backup_port 0 int \u5907\u4efd\u6570\u636e\u5e93\u7aef\u53e3 backup_user \"\" string \u5907\u4efd\u6570\u636e\u5e93\u7528\u6237\u540d backup_password \"\" string \u5907\u4efd\u6570\u636e\u5e93\u5bc6\u7801 \u5e76\u4e14\u5728\u6267\u884csql\u65f6\uff0c\u6dfb\u52a0 --backup=true \u9009\u9879 /*--user=root;--password=root;--host=127.0.0.1;--port=3306;--execute=1;--backup=1;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit;","title":"\u5907\u4efd\u529f\u80fd\u8bf4\u660e"},{"location":"backup/#_2","text":"\u5728\u5907\u4efd\u670d\u52a1\u5668\u4e0a\uff0c\u5907\u4efd\u5e93\u7684\u547d\u540d\u683c\u5f0f\u4e3a\uff1a IP_PORT_\u5e93\u540d \uff0c\u4f8b\u5982 127_0_0_1_3306_test \u5728\u5907\u4efd\u5e93\u4e0a\u521b\u5efa\u5907\u4efd\u4fe1\u606f\u8868 $_$Inception_backup_information$_$ \uff0c\u7528\u6765\u4fdd\u5b58\u8be5\u5e93\u7684\u6267\u884c\u4fe1\u606f\u548c\u56de\u6eda\u8bed\u53e5\u4fe1\u606f \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e opid_time varchar(50) \u6267\u884c\u64cd\u4f5cID,\u683c\u5f0f\u4e3a \u65f6\u95f4\u6233_\u7ebf\u7a0b\u53f7_\u6267\u884c\u5e8f\u53f7 start_binlog_file varchar(512) \u8d77\u59cbbinlog\u6587\u4ef6 start_binlog_pos int(11) \u8d77\u59cbbinlog\u4f4d\u7f6e end_binlog_file varchar(512) \u7ec8\u6b62binlog\u6587\u4ef6 end_binlog_pos int(11) \u7ec8\u6b62binlog\u4f4d\u7f6e sql_statement text \u6267\u884cSQL host varchar(64) \u6267\u884cIP\u5730\u5740 dbname varchar(64) \u6267\u884c\u5e93\u540d tablename varchar(64) \u6267\u884c\u8868\u540d port int(11) \u6267\u884c\u7aef\u53e3 time timestamp \u6267\u884c\u65f6\u95f4 type varchar(20) \u64cd\u4f5c\u7c7b\u578b \u5728\u5907\u4efd\u5e93\u6709\u548c\u64cd\u4f5c\u8868\u76f8\u540c\u7684\u8868\u540d\uff0c\u5176\u8868\u7ed3\u6784\u7edf\u4e00\u4e3a\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e id bigint \u81ea\u589e\u4e3b\u952e rollback_statement mediumtext \u56de\u6eda\u8bed\u53e5 opid_time varchar(50) \u5173\u8054\u6267\u884c\u64cd\u4f5cID","title":"\u5907\u4efd\u529f\u80fd\u5199\u5165\u89c4\u5219"},{"location":"backup/#_3","text":"\u914d\u7f6e\u5907\u4efd\u6570\u636e\u5e93\uff0c\u5e76\u5728\u6267\u884cSQl\u65f6\u5f00\u542f\u5907\u4efd\u529f\u80fd \u5728\u6267\u884cSQL\u524d\u8bb0\u5f55binlog\u4f4d\u7f6e\u548c\u7ebf\u7a0b\u53f7(\u9010\u6761\u6267\u884c\u9010\u6761\u8bb0\u5f55) \u6267\u884cSQL \u5728\u6267\u884cSQL\u540e\u8bb0\u5f55binlog\u4f4d\u7f6e\u548c\u7ebf\u7a0b\u53f7 \u5f00\u59cb\u5907\u4efd\uff0c\u89e3\u6790\u8fdc\u7a0b\u670d\u52a1\u5668binlog \u5728\u5907\u4efd\u670d\u52a1\u5668\u521b\u5efa\u5907\u4efd\u5e93 \u521b\u5efa\u5907\u4efd\u4fe1\u606f\u8868\uff0c\u5199\u5165\u6267\u884c\u4fe1\u606f\u548cbinlog\u4f4d\u7f6e\u4fe1\u606f \u521b\u5efa\u5907\u4efd\u8868\uff0c \u9010\u6b65\u89e3\u6790binlog\uff0c\u5e76\u751f\u6210\u56de\u6eda\u8bed\u53e5\uff0c\u5199\u5165\u5907\u4efd\u8868","title":"\u5907\u4efd\u529f\u80fd\u8be6\u7ec6\u6b65\u9aa4"},{"location":"changelog/","text":"goInception \u66f4\u65b0\u65e5\u5fd7 [v0.6.3-beta] - 2019-4-22 New Features \u6dfb\u52a0 max_insert_rows \u53c2\u6570\uff0c\u8bbe\u7f6einsert values\u5141\u8bb8\u7684\u6700\u5927\u884c\u6570\u3002 \u6dfb\u52a0 must_have_columns \u53c2\u6570\uff0c\u7528\u4ee5\u6307\u5b9a\u5efa\u8868\u65f6\u5fc5\u987b\u521b\u5efa\u7684\u5217\u3002\u591a\u4e2a\u5217\u65f6\u4ee5\u9017\u53f7\u5206\u9694( \u683c\u5f0f: \u5217\u540d [\u5217\u7c7b\u578b,\u53ef\u9009] ) [v0.6.2-beta] - 2019-4-18 Update \u6dfb\u52a0\u4e0d\u652f\u6301\u7684\u8bed\u6cd5\u8b66\u544a(create table as\u548ccreate table select) \u5b9e\u73b0alter\u591a\u5b50\u53e5\u65f6\u7684\u8868\u7ed3\u6784\u53d8\u5316\u652f\u6301,\u5982drop column\u540e\u8ddfadd column Fix \u4fee\u590dexplain\u8fd4\u56denull\u5217\u65f6\u62a5\u9519\u7684\u95ee\u9898 \u4fee\u590d\u7d22\u5f15\u7684\u552f\u4e00\u6807\u8bc6\u8bbe\u7f6e\u9519\u8bef\u95ee\u9898 [v0.6.1-beta] - 2019-4-9 Update \u6dfb\u52a0\u8fdc\u7aef\u6570\u636e\u5e93\u65ad\u5f00\u91cd\u8fde\u673a\u5236\uff0c\u4f18\u5316\u7ebf\u7a0b\u53f7\u548cmaster status\u67e5\u8be2\u901f\u5ea6 \u4f18\u5316\u8fdc\u7aef\u6570\u636e\u5e93\u8bbf\u95ee\u64cd\u4f5c \u4f18\u5316sql\u5185\u5bb9\u89e3\u6790\uff0c\u79fb\u9664\u591a\u4f59\u5206\u53f7\u548c\u7a7a\u683c Fix \u4fee\u590d\u8de8\u5e93update\u65f6\u65e0\u6cd5\u627e\u5230\u5217\u7684\u95ee\u9898 \u4fee\u590dosc\u5b50\u53e5\u6709\u53cc\u5f15\u53f7\u65f6\u6267\u884c\u9519\u8bef\u7684\u95ee\u9898 New Features \u6dfb\u52a0sql\u6307\u7eb9\u529f\u80fd dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6 \u53ef\u4ee5\u901a\u8fc7 inception set enable_fingerprint=1; \u6216\u914d\u7f6e\u6587\u4ef6\u5f00\u542f\u5168\u5c40\u914d\u7f6e \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u9009\u9879 --fingerprint=1; \u5f00\u542f\u5355\u4e2a\u914d\u7f6e \u4e24\u79cd\u914d\u7f6e\u53d6\u5e76\u96c6\uff0c\u5373\u5f00\u542f\u4efb\u4e00\u914d\u7f6e\uff0c\u5219\u542f\u7528sql\u6307\u7eb9\u529f\u80fd\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 [v0.6-beta] - 2019-4-3 Update \u5907\u4efd\u64cd\u4f5c\u6027\u80fd\u4f18\u5316,\u5907\u4efd\u4fe1\u606f\u6539\u4e3a\u6279\u91cf\u5199\u5165 \u6dfb\u52a0\u5907\u4efd\u5e93\u8fde\u63a5\u8d85\u65f6\u68c0\u67e5 explain\u51fd\u6570\u6027\u80fd\u4f18\u5316 \u4f18\u5316\u90e8\u5206\u51fd\u6570\u672a\u6307\u5b9a\u67b6\u6784\u540d\u65f6\u7684\u9ed8\u8ba4\u5904\u7406 \u4f18\u5316\u9ed8\u8ba4\u503c\u68c0\u67e5,\u6dfb\u52a0\u8ba1\u7b97\u5217\u652f\u6301 (#12, #13, #14) \u4f18\u5316\u65f6\u95f4\u683c\u5f0f\u548c\u8303\u56f4\u68c0\u67e5,\u6839\u636e\u6570\u636e\u5e93sql_mode\u6821\u9a8c\u96f6\u503c\u65e5\u671f \u5347\u7ea7\u5230go 1.12 Fix \u4fee\u590dindex name\u6821\u9a8c\u903b\u8f91,\u5176\u53ef\u4e0e\u5217\u540d\u4e00\u81f4 \u4fee\u590dtimestamp\u9ed8\u8ba4\u503c\u6821\u9a8c\u4e0d\u51c6\u786e\u7684\u95ee\u9898 New Features \u6dfb\u52a0kill\u529f\u80fd\u652f\u6301,\u5728\u5ba1\u6838\u548c\u6267\u884c\u65f6\u53ef\u4ee5kill,\u5907\u4efd\u9636\u6bb5\u65e0\u6cd5kill (#10) \u6dfb\u52a0 check_timestamp_count \u53c2\u6570,\u53ef\u914d\u7f6e\u662f\u5426\u68c0\u67e5current_timestamp\u6570\u91cf (#11, #15) [v0.5.3-beta] - 2019-3-25 Update \u53d8\u66f4\u5217\u540d\u65f6\u4f7f\u7528\u903b\u8f91\u6821\u9a8c,\u907f\u514dexplain update\u5931\u8d25 \u6dfb\u52a0union\u5b50\u53e5\u6821\u9a8c \u6dfb\u52a0\u8868\u540d\u522b\u540d\u91cd\u590d\u6027\u6821\u9a8c Fix \u4fee\u590dupdate set\u5b50\u53e5\u6307\u5b9a\u8868\u522b\u540d\u65f6\u6821\u9a8c\u95ee\u9898 \u4fee\u590d\u81ea\u589e\u5217\u6821\u9a8c\u95ee\u9898 \u4fee\u590ddefault value\u4e3a\u8868\u8fbe\u5f0f\u65f6\u7684\u6821\u9a8c\u95ee\u9898 [v0.5.2-beta] - 2019-3-17 Update \u4f18\u5316\u4e3b\u952eNULL\u5217\u5ba1\u6838\u89c4\u5219(\u5ba1\u6838 DEFAULT NULL ) \u4f18\u5316\u7d22\u5f15\u603b\u957f\u5ea6\u6821\u9a8c,\u6839\u636e\u5217\u5b57\u7b26\u96c6\u5224\u65ad\u5b57\u8282\u6570\u957f\u5ea6 \u4f18\u5316DDL\u5907\u4efd\u5bf9\u9ed8\u8ba4\u503c\u7684\u5904\u7406 [v0.5.1-beta] - 2019-3-14 Update \u4f18\u5316option\u89e3\u6790\u89c4\u5219,\u5bc6\u7801\u517c\u5bb9\u7279\u6b8a\u5b57\u7b26 \u4f18\u5316\u8bed\u6cd5\u89e3\u6790\u5931\u8d25\u65f6\u8fd4\u56de\u7684sql\u8bed\u53e5 \u6dfb\u52a0\u4e2d\u6587\u7684\u5f02\u5e38\u548c\u8b66\u544a\u4fe1\u606f \u6dfb\u52a0\u65b0\u7684\u53c2\u6570 lang \u8bbe\u7f6e\u8fd4\u56de\u7684\u5f02\u5e38\u4fe1\u606f\u8bed\u8a00,\u53ef\u9009\u503c en-US , zh-CN ,\u9ed8\u8ba4 en-US Fix \u4fee\u590dmariadb\u5907\u4efd\u8b66\u544a\u4fe1\u606f\u91cd\u590d\u7684\u95ee\u9898 [v0.5-beta] - 2019-3-10 Update \u517c\u5bb9mariadb v10\u7248\u672c\u7684\u5907\u4efd\u517c\u5bb9(\u9ad8\u5e76\u53d1\u65f6\u56de\u6eda\u8bed\u53e5\u53ef\u80fd\u6709\u8bef\uff0c\u987b\u6ce8\u610f\u68c0\u67e5) \u66f4\u65b0pt-osc\u90e8\u5206\u53c2\u6570\u540d\uff0c\u4f7f\u5176\u4e0einception\u4fdd\u6301\u4e00\u81f4 osc_critical_running -> osc_critical_thread_running osc_critical_connected -> osc_critical_thread_connected osc_max_running -> osc_max_thread_running osc_max_connected -> osc_max_thread_connected \u9690\u85cfgh-osc\u90e8\u5206\u672a\u4f7f\u7528\u53c2\u6570 \u6dfb\u52a0\u662f\u5426\u5141\u8bb8\u5220\u9664\u6570\u636e\u5e93\u53c2\u6570 enable_drop_database \u4f18\u5316\u7cfb\u7edf\u53d8\u91cfvariables\u663e\u793a\u548c\u8bbe\u7f6e \u8c03\u6574\u90e8\u5206\u53c2\u6570\u9ed8\u8ba4\u503c ghost_ok_to_drop_table true ghost_skip_foreign_key_checks true osc_chunk_size 1000 Fix \u4fee\u590djson\u5217\u6821\u9a8c\u5f02\u5e38\u95ee\u9898 (#7) [v0.4.1-beta] - 2019-3-6 Update \u517c\u5bb9mariadb\u6570\u636e\u5e93(v5.5.60) \u6dfb\u52a0mariadb\u7684binlog\u89e3\u6790\u652f\u6301(\u6d4b\u8bd5\u7248\u672c v5.5.60 ,v10\u7248\u672c\u7531\u4e8ebinlog\u683c\u5f0f\u6539\u53d8,\u6682\u65e0\u6cd5\u89e3\u6790thread_id) \u4f18\u5316\u5907\u4efd\u5931\u8d25\u65f6\u7684\u8fd4\u56de\u4fe1\u606f [v0.4-beta] - 2019-3-5 New Features \u6dfb\u52a0gh-ost\u5de5\u5177\u652f\u6301 \u65e0\u9700\u5b89\u88c5gh-ost,\u529f\u80fd\u5185\u7f6e(v1.0.48) \u8fdb\u7a0b\u5217\u8868 inception get osc processlist \u6307\u5b9a\u8fdb\u7a0b\u4fe1\u606f inception get osc_percent 'sqlsha1' \u8fdb\u7a0b\u7ec8\u6b62 inception stop alter 'sqlsha1' (\u540c\u4e49\u8bcd inception kill osc 'sqlsha1' ) \u8fdb\u7a0b\u6682\u505c inception pause alter 'sqlsha1' (\u540c\u4e49\u8bcd inception pause osc 'sqlsha1' ) \u8fdb\u7a0b\u6062\u590d inception resume alter 'sqlsha1' (\u540c\u4e49\u8bcd inception resume osc 'sqlsha1' ) \u517c\u5bb9gh-ost\u53c2\u6570 inception show variables like 'ghost%' [v0.3-beta] - 2019-2-13 New Features \u6dfb\u52a0pt-osc\u5de5\u5177\u652f\u6301 inception get osc processlist \u67e5\u770bosc\u8fdb\u7a0b\u5217\u8868 inception get osc_percent 'sqlsha1' \u67e5\u770b\u6307\u5b9a\u7684osc\u8fdb\u7a0b inception stop alter 'sqlsha1' (\u540c\u4e49\u8bcd inception kill osc 'sqlsha1' )\u4e2d\u6b62\u6307\u5b9a\u7684osc\u8fdb\u7a0b [v0.2-beta] - 2019-1-31 Optimizer \u4f18\u5316\u4e8c\u8fdb\u5236\u6784\u5efa\u65b9\u5f0f\uff0c\u538b\u7f29\u5b89\u88c5\u5305\u5927\u5c0f \u79fb\u9664vendor\u4f9d\u8d56\uff0c\u4f18\u5316GO111MODULE\u4f7f\u7528\u65b9\u5f0f \u8df3\u8fc7\u6743\u9650\u6821\u9a8c\uff0c\u4ee5\u907f\u514d\u767b\u9646goInception\u5931\u8d25 \u79fb\u9664root\u8eab\u4efd\u542f\u52a8\u6821\u9a8c\uff0c\u4ee5\u907f\u514dwindows\u65e0\u6cd5\u542f\u52a8 \u4f18\u5316inception set\u53d8\u91cf\u65f6\u7684\u7c7b\u578b\u6821\u9a8c [v0.1-beta] - 2019-1-25 goInception\u6b63\u5f0f\u53d1\u5e03","title":"\u66f4\u65b0\u65e5\u5fd7"},{"location":"changelog/#goinception","text":"","title":"goInception \u66f4\u65b0\u65e5\u5fd7"},{"location":"changelog/#v063-beta-2019-4-22","text":"","title":"[v0.6.3-beta] - 2019-4-22"},{"location":"changelog/#new-features","text":"\u6dfb\u52a0 max_insert_rows \u53c2\u6570\uff0c\u8bbe\u7f6einsert values\u5141\u8bb8\u7684\u6700\u5927\u884c\u6570\u3002 \u6dfb\u52a0 must_have_columns \u53c2\u6570\uff0c\u7528\u4ee5\u6307\u5b9a\u5efa\u8868\u65f6\u5fc5\u987b\u521b\u5efa\u7684\u5217\u3002\u591a\u4e2a\u5217\u65f6\u4ee5\u9017\u53f7\u5206\u9694( \u683c\u5f0f: \u5217\u540d [\u5217\u7c7b\u578b,\u53ef\u9009] )","title":"New Features"},{"location":"changelog/#v062-beta-2019-4-18","text":"","title":"[v0.6.2-beta] - 2019-4-18"},{"location":"changelog/#update","text":"\u6dfb\u52a0\u4e0d\u652f\u6301\u7684\u8bed\u6cd5\u8b66\u544a(create table as\u548ccreate table select) \u5b9e\u73b0alter\u591a\u5b50\u53e5\u65f6\u7684\u8868\u7ed3\u6784\u53d8\u5316\u652f\u6301,\u5982drop column\u540e\u8ddfadd column","title":"Update"},{"location":"changelog/#fix","text":"\u4fee\u590dexplain\u8fd4\u56denull\u5217\u65f6\u62a5\u9519\u7684\u95ee\u9898 \u4fee\u590d\u7d22\u5f15\u7684\u552f\u4e00\u6807\u8bc6\u8bbe\u7f6e\u9519\u8bef\u95ee\u9898","title":"Fix"},{"location":"changelog/#v061-beta-2019-4-9","text":"","title":"[v0.6.1-beta] - 2019-4-9"},{"location":"changelog/#update_1","text":"\u6dfb\u52a0\u8fdc\u7aef\u6570\u636e\u5e93\u65ad\u5f00\u91cd\u8fde\u673a\u5236\uff0c\u4f18\u5316\u7ebf\u7a0b\u53f7\u548cmaster status\u67e5\u8be2\u901f\u5ea6 \u4f18\u5316\u8fdc\u7aef\u6570\u636e\u5e93\u8bbf\u95ee\u64cd\u4f5c \u4f18\u5316sql\u5185\u5bb9\u89e3\u6790\uff0c\u79fb\u9664\u591a\u4f59\u5206\u53f7\u548c\u7a7a\u683c","title":"Update"},{"location":"changelog/#fix_1","text":"\u4fee\u590d\u8de8\u5e93update\u65f6\u65e0\u6cd5\u627e\u5230\u5217\u7684\u95ee\u9898 \u4fee\u590dosc\u5b50\u53e5\u6709\u53cc\u5f15\u53f7\u65f6\u6267\u884c\u9519\u8bef\u7684\u95ee\u9898","title":"Fix"},{"location":"changelog/#new-features_1","text":"\u6dfb\u52a0sql\u6307\u7eb9\u529f\u80fd dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6 \u53ef\u4ee5\u901a\u8fc7 inception set enable_fingerprint=1; \u6216\u914d\u7f6e\u6587\u4ef6\u5f00\u542f\u5168\u5c40\u914d\u7f6e \u4e5f\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528\u9009\u9879 --fingerprint=1; \u5f00\u542f\u5355\u4e2a\u914d\u7f6e \u4e24\u79cd\u914d\u7f6e\u53d6\u5e76\u96c6\uff0c\u5373\u5f00\u542f\u4efb\u4e00\u914d\u7f6e\uff0c\u5219\u542f\u7528sql\u6307\u7eb9\u529f\u80fd\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002","title":"New Features"},{"location":"changelog/#v06-beta-2019-4-3","text":"","title":"[v0.6-beta] - 2019-4-3"},{"location":"changelog/#update_2","text":"\u5907\u4efd\u64cd\u4f5c\u6027\u80fd\u4f18\u5316,\u5907\u4efd\u4fe1\u606f\u6539\u4e3a\u6279\u91cf\u5199\u5165 \u6dfb\u52a0\u5907\u4efd\u5e93\u8fde\u63a5\u8d85\u65f6\u68c0\u67e5 explain\u51fd\u6570\u6027\u80fd\u4f18\u5316 \u4f18\u5316\u90e8\u5206\u51fd\u6570\u672a\u6307\u5b9a\u67b6\u6784\u540d\u65f6\u7684\u9ed8\u8ba4\u5904\u7406 \u4f18\u5316\u9ed8\u8ba4\u503c\u68c0\u67e5,\u6dfb\u52a0\u8ba1\u7b97\u5217\u652f\u6301 (#12, #13, #14) \u4f18\u5316\u65f6\u95f4\u683c\u5f0f\u548c\u8303\u56f4\u68c0\u67e5,\u6839\u636e\u6570\u636e\u5e93sql_mode\u6821\u9a8c\u96f6\u503c\u65e5\u671f \u5347\u7ea7\u5230go 1.12","title":"Update"},{"location":"changelog/#fix_2","text":"\u4fee\u590dindex name\u6821\u9a8c\u903b\u8f91,\u5176\u53ef\u4e0e\u5217\u540d\u4e00\u81f4 \u4fee\u590dtimestamp\u9ed8\u8ba4\u503c\u6821\u9a8c\u4e0d\u51c6\u786e\u7684\u95ee\u9898","title":"Fix"},{"location":"changelog/#new-features_2","text":"\u6dfb\u52a0kill\u529f\u80fd\u652f\u6301,\u5728\u5ba1\u6838\u548c\u6267\u884c\u65f6\u53ef\u4ee5kill,\u5907\u4efd\u9636\u6bb5\u65e0\u6cd5kill (#10) \u6dfb\u52a0 check_timestamp_count \u53c2\u6570,\u53ef\u914d\u7f6e\u662f\u5426\u68c0\u67e5current_timestamp\u6570\u91cf (#11, #15)","title":"New Features"},{"location":"changelog/#v053-beta-2019-3-25","text":"","title":"[v0.5.3-beta] - 2019-3-25"},{"location":"changelog/#update_3","text":"\u53d8\u66f4\u5217\u540d\u65f6\u4f7f\u7528\u903b\u8f91\u6821\u9a8c,\u907f\u514dexplain update\u5931\u8d25 \u6dfb\u52a0union\u5b50\u53e5\u6821\u9a8c \u6dfb\u52a0\u8868\u540d\u522b\u540d\u91cd\u590d\u6027\u6821\u9a8c","title":"Update"},{"location":"changelog/#fix_3","text":"\u4fee\u590dupdate set\u5b50\u53e5\u6307\u5b9a\u8868\u522b\u540d\u65f6\u6821\u9a8c\u95ee\u9898 \u4fee\u590d\u81ea\u589e\u5217\u6821\u9a8c\u95ee\u9898 \u4fee\u590ddefault value\u4e3a\u8868\u8fbe\u5f0f\u65f6\u7684\u6821\u9a8c\u95ee\u9898","title":"Fix"},{"location":"changelog/#v052-beta-2019-3-17","text":"","title":"[v0.5.2-beta] - 2019-3-17"},{"location":"changelog/#update_4","text":"\u4f18\u5316\u4e3b\u952eNULL\u5217\u5ba1\u6838\u89c4\u5219(\u5ba1\u6838 DEFAULT NULL ) \u4f18\u5316\u7d22\u5f15\u603b\u957f\u5ea6\u6821\u9a8c,\u6839\u636e\u5217\u5b57\u7b26\u96c6\u5224\u65ad\u5b57\u8282\u6570\u957f\u5ea6 \u4f18\u5316DDL\u5907\u4efd\u5bf9\u9ed8\u8ba4\u503c\u7684\u5904\u7406","title":"Update"},{"location":"changelog/#v051-beta-2019-3-14","text":"","title":"[v0.5.1-beta] - 2019-3-14"},{"location":"changelog/#update_5","text":"\u4f18\u5316option\u89e3\u6790\u89c4\u5219,\u5bc6\u7801\u517c\u5bb9\u7279\u6b8a\u5b57\u7b26 \u4f18\u5316\u8bed\u6cd5\u89e3\u6790\u5931\u8d25\u65f6\u8fd4\u56de\u7684sql\u8bed\u53e5 \u6dfb\u52a0\u4e2d\u6587\u7684\u5f02\u5e38\u548c\u8b66\u544a\u4fe1\u606f \u6dfb\u52a0\u65b0\u7684\u53c2\u6570 lang \u8bbe\u7f6e\u8fd4\u56de\u7684\u5f02\u5e38\u4fe1\u606f\u8bed\u8a00,\u53ef\u9009\u503c en-US , zh-CN ,\u9ed8\u8ba4 en-US","title":"Update"},{"location":"changelog/#fix_4","text":"\u4fee\u590dmariadb\u5907\u4efd\u8b66\u544a\u4fe1\u606f\u91cd\u590d\u7684\u95ee\u9898","title":"Fix"},{"location":"changelog/#v05-beta-2019-3-10","text":"","title":"[v0.5-beta] - 2019-3-10"},{"location":"changelog/#update_6","text":"\u517c\u5bb9mariadb v10\u7248\u672c\u7684\u5907\u4efd\u517c\u5bb9(\u9ad8\u5e76\u53d1\u65f6\u56de\u6eda\u8bed\u53e5\u53ef\u80fd\u6709\u8bef\uff0c\u987b\u6ce8\u610f\u68c0\u67e5) \u66f4\u65b0pt-osc\u90e8\u5206\u53c2\u6570\u540d\uff0c\u4f7f\u5176\u4e0einception\u4fdd\u6301\u4e00\u81f4 osc_critical_running -> osc_critical_thread_running osc_critical_connected -> osc_critical_thread_connected osc_max_running -> osc_max_thread_running osc_max_connected -> osc_max_thread_connected \u9690\u85cfgh-osc\u90e8\u5206\u672a\u4f7f\u7528\u53c2\u6570 \u6dfb\u52a0\u662f\u5426\u5141\u8bb8\u5220\u9664\u6570\u636e\u5e93\u53c2\u6570 enable_drop_database \u4f18\u5316\u7cfb\u7edf\u53d8\u91cfvariables\u663e\u793a\u548c\u8bbe\u7f6e \u8c03\u6574\u90e8\u5206\u53c2\u6570\u9ed8\u8ba4\u503c ghost_ok_to_drop_table true ghost_skip_foreign_key_checks true osc_chunk_size 1000","title":"Update"},{"location":"changelog/#fix_5","text":"\u4fee\u590djson\u5217\u6821\u9a8c\u5f02\u5e38\u95ee\u9898 (#7)","title":"Fix"},{"location":"changelog/#v041-beta-2019-3-6","text":"","title":"[v0.4.1-beta] - 2019-3-6"},{"location":"changelog/#update_7","text":"\u517c\u5bb9mariadb\u6570\u636e\u5e93(v5.5.60) \u6dfb\u52a0mariadb\u7684binlog\u89e3\u6790\u652f\u6301(\u6d4b\u8bd5\u7248\u672c v5.5.60 ,v10\u7248\u672c\u7531\u4e8ebinlog\u683c\u5f0f\u6539\u53d8,\u6682\u65e0\u6cd5\u89e3\u6790thread_id) \u4f18\u5316\u5907\u4efd\u5931\u8d25\u65f6\u7684\u8fd4\u56de\u4fe1\u606f","title":"Update"},{"location":"changelog/#v04-beta-2019-3-5","text":"","title":"[v0.4-beta] - 2019-3-5"},{"location":"changelog/#new-features_3","text":"\u6dfb\u52a0gh-ost\u5de5\u5177\u652f\u6301 \u65e0\u9700\u5b89\u88c5gh-ost,\u529f\u80fd\u5185\u7f6e(v1.0.48) \u8fdb\u7a0b\u5217\u8868 inception get osc processlist \u6307\u5b9a\u8fdb\u7a0b\u4fe1\u606f inception get osc_percent 'sqlsha1' \u8fdb\u7a0b\u7ec8\u6b62 inception stop alter 'sqlsha1' (\u540c\u4e49\u8bcd inception kill osc 'sqlsha1' ) \u8fdb\u7a0b\u6682\u505c inception pause alter 'sqlsha1' (\u540c\u4e49\u8bcd inception pause osc 'sqlsha1' ) \u8fdb\u7a0b\u6062\u590d inception resume alter 'sqlsha1' (\u540c\u4e49\u8bcd inception resume osc 'sqlsha1' ) \u517c\u5bb9gh-ost\u53c2\u6570 inception show variables like 'ghost%'","title":"New Features"},{"location":"changelog/#v03-beta-2019-2-13","text":"","title":"[v0.3-beta] - 2019-2-13"},{"location":"changelog/#new-features_4","text":"\u6dfb\u52a0pt-osc\u5de5\u5177\u652f\u6301 inception get osc processlist \u67e5\u770bosc\u8fdb\u7a0b\u5217\u8868 inception get osc_percent 'sqlsha1' \u67e5\u770b\u6307\u5b9a\u7684osc\u8fdb\u7a0b inception stop alter 'sqlsha1' (\u540c\u4e49\u8bcd inception kill osc 'sqlsha1' )\u4e2d\u6b62\u6307\u5b9a\u7684osc\u8fdb\u7a0b","title":"New Features"},{"location":"changelog/#v02-beta-2019-1-31","text":"","title":"[v0.2-beta] - 2019-1-31"},{"location":"changelog/#optimizer","text":"\u4f18\u5316\u4e8c\u8fdb\u5236\u6784\u5efa\u65b9\u5f0f\uff0c\u538b\u7f29\u5b89\u88c5\u5305\u5927\u5c0f \u79fb\u9664vendor\u4f9d\u8d56\uff0c\u4f18\u5316GO111MODULE\u4f7f\u7528\u65b9\u5f0f \u8df3\u8fc7\u6743\u9650\u6821\u9a8c\uff0c\u4ee5\u907f\u514d\u767b\u9646goInception\u5931\u8d25 \u79fb\u9664root\u8eab\u4efd\u542f\u52a8\u6821\u9a8c\uff0c\u4ee5\u907f\u514dwindows\u65e0\u6cd5\u542f\u52a8 \u4f18\u5316inception set\u53d8\u91cf\u65f6\u7684\u7c7b\u578b\u6821\u9a8c","title":"Optimizer"},{"location":"changelog/#v01-beta-2019-1-25","text":"","title":"[v0.1-beta] - 2019-1-25"},{"location":"changelog/#goinception_1","text":"","title":"goInception\u6b63\u5f0f\u53d1\u5e03"},{"location":"demo/","text":"python\u8c03\u7528 pip install pymysql prettytable #!/usr/bin/env python # -*- coding:utf-8 -*- import pymysql import prettytable as pt tb = pt.PrettyTable() sql = '''/*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test_inc; create table t1(id int primary key,c1 int); insert into t1(id,c1,c2) values(1,1,1); inception_magic_commit;''' conn = pymysql.connect(host='127.0.0.1', user='', passwd='', db='', port=4000, charset=\"utf8mb4\") cur = conn.cursor() ret = cur.execute(sql) result = cur.fetchall() cur.close() conn.close() tb.field_names = [i[0] for i in cur.description] for row in result: tb.add_row(row) print(tb) \u8fd4\u56de\u7ed3\u679c\uff1a order_id stage error_level stage_status error_message sql affected_rows sequence backup_dbname execute_time sqlsha1 backup_time 1 CHECKED 0 Audit Completed None use test_inc 0 0_0_00000000 None 0 None 0 2 CHECKED 0 Audit Completed None create table t1(id int primary key,c1 int) 0 0_0_00000001 None 0 None 0 3 CHECKED 2 Audit Completed Column 't1.c2' not existed. insert into t1(id,c1,c2) values(1,1,1) 1 0_0_00000002 None 0 None 0 \u7cfb\u7edf\u53d8\u91cf \u8fde\u63a5 mysql -h127.0.0.1 -P4000 inception show variables; \u8fdb\u7a0b\u5217\u8868 \u8fde\u63a5 mysql -h127.0.0.1 -P4000 inception show processlist; \u4e2d\u6b62\u8fdb\u7a0b( *new ) \u5728\u5ba1\u6838\u548c\u6267\u884c\u9636\u6bb5\u53ef\u4ee5kill,\u5907\u4efd\u9636\u6bb5\u4e0d\u518d\u5141\u8bb8kill v0.6.2 \u65b0\u589e \u76f8\u5173\u94fe\u63a5\uff1a kill \u64cd\u4f5c\u652f\u6301 mysql -h127.0.0.1 -P4000 inception show processlist; kill 2;","title":"\u4f7f\u7528\u793a\u4f8b"},{"location":"demo/#python","text":"pip install pymysql prettytable #!/usr/bin/env python # -*- coding:utf-8 -*- import pymysql import prettytable as pt tb = pt.PrettyTable() sql = '''/*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test_inc; create table t1(id int primary key,c1 int); insert into t1(id,c1,c2) values(1,1,1); inception_magic_commit;''' conn = pymysql.connect(host='127.0.0.1', user='', passwd='', db='', port=4000, charset=\"utf8mb4\") cur = conn.cursor() ret = cur.execute(sql) result = cur.fetchall() cur.close() conn.close() tb.field_names = [i[0] for i in cur.description] for row in result: tb.add_row(row) print(tb) \u8fd4\u56de\u7ed3\u679c\uff1a order_id stage error_level stage_status error_message sql affected_rows sequence backup_dbname execute_time sqlsha1 backup_time 1 CHECKED 0 Audit Completed None use test_inc 0 0_0_00000000 None 0 None 0 2 CHECKED 0 Audit Completed None create table t1(id int primary key,c1 int) 0 0_0_00000001 None 0 None 0 3 CHECKED 2 Audit Completed Column 't1.c2' not existed. insert into t1(id,c1,c2) values(1,1,1) 1 0_0_00000002 None 0 None 0","title":"python\u8c03\u7528"},{"location":"demo/#_1","text":"\u8fde\u63a5 mysql -h127.0.0.1 -P4000 inception show variables;","title":"\u7cfb\u7edf\u53d8\u91cf"},{"location":"demo/#_2","text":"\u8fde\u63a5 mysql -h127.0.0.1 -P4000 inception show processlist;","title":"\u8fdb\u7a0b\u5217\u8868"},{"location":"demo/#new","text":"\u5728\u5ba1\u6838\u548c\u6267\u884c\u9636\u6bb5\u53ef\u4ee5kill,\u5907\u4efd\u9636\u6bb5\u4e0d\u518d\u5141\u8bb8kill v0.6.2 \u65b0\u589e \u76f8\u5173\u94fe\u63a5\uff1a kill \u64cd\u4f5c\u652f\u6301 mysql -h127.0.0.1 -P4000 inception show processlist; kill 2;","title":"\u4e2d\u6b62\u8fdb\u7a0b(*new)"},{"location":"ghost/","text":"gh-ost \u5185\u7f6egh-ost\u6e90\u7801( v1.0.48 )\uff0c\u56e0\u6b64\u65e0\u987b\u4e0b\u8f7d\u3002 \u624b\u52a8\u7ec8\u6b62\u548c\u6682\u505c\u53ca\u6062\u590d\u529f\u80fd\u5df2\u5f00\u653e\u76f8\u5e94\u547d\u4ee4\uff0c\u56e0\u6b64\u9690\u85cf\u76f8\u5173\u53c2\u6570\u3002 \u53c2\u6570\u8bbe\u7f6e gh-ost\u5de5\u5177\u7684\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53ef\u4ee5\u901a\u8fc7 inception show variables like 'ghost%'; \u67e5\u770b inception show variables like 'ghost%'; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set osc_check_interval = 10; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 \u8fdb\u7a0b\u547d\u4ee4 \u67e5\u770bosc\u8fdb\u7a0b inception get osc processlist; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME COMMAND SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 alter table t1 add column c33 int *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 9 00:36 Copying test_inc . t1 : 9% 00:36 remain \u67e5\u770b\u6307\u5b9aosc\u8fdb\u7a0b inception get osc_percent '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 49 00:14 Copying test_inc . t1 : 49% 00:14 remain \u7ec8\u6b62\u6307\u5b9aosc\u8fdb\u7a0b \u7ec8\u6b62\u540e\u6ce8\u610f\u624b\u52a8\u6e05\u7406\u76f8\u5173\u8f85\u52a9\u8868 inception kill osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception stop alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u6682\u505c\u6307\u5b9aosc\u8fdb\u7a0b inception pause osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception pause alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u6062\u590d\u6307\u5b9aosc\u8fdb\u7a0b inception resume osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception resume alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u590d\u7528pt-osc\u53c2\u6570 \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e osc_critical_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_critical_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_running\u90e8\u5206 osc_max_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_max_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_running\u90e8\u5206 osc_min_table_size 16 int OSC\u7684\u5f00\u5173\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u5168\u90e8ALTER\u8bed\u53e5\u90fd\u8d70OSC\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u975e0\uff0c\u5219\u5f53\u8fd9\u4e2a\u8868\u5360\u7528\u7a7a\u95f4\u5927\u5c0f\u5927\u4e8e\u8fd9\u4e2a\u503c\u65f6\u624d\u4f7f\u7528OSC\u65b9\u5f0f\u3002\u5355\u4f4d\u4e3aM\uff0c\u8fd9\u4e2a\u8868\u5927\u5c0f\u7684\u8ba1\u7b97\u65b9\u5f0f\u662f\u901a\u8fc7\u8bed\u53e5\uff1a select (DATA_LENGTH + INDEX_LENGTH)/1024/1024 from information_schema.tables where table_schema = \"dbname\" and table_name = \"tablename\"\u6765\u5b9e\u73b0\u7684\u3002 osc_print_none false bool \u7528\u6765\u8bbe\u7f6e\u5728Inception\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\uff0c\u5bf9\u4e8e\u539f\u6765OSC\u5728\u6267\u884c\u8fc7\u7a0b\u7684\u6807\u51c6\u8f93\u51fa\u4fe1\u606f\u662f\u4e0d\u662f\u8981\u6253\u5370\u5230\u7ed3\u679c\u96c6\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u5217\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u5c31\u4e0d\u6253\u5370\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5c31\u6253\u5370\u3002\u800c\u5982\u679c\u51fa\u73b0\u9519\u8bef\u4e86\uff0c\u5219\u90fd\u4f1a\u6253\u5370 \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e ghost_on false bool gh-ost\u5f00\u5173 ghost_aliyun_rds false bool \u963f\u91cc\u4e91rds\u6570\u636e\u5e93\u6807\u5fd7 ghost_allow_master_master false bool \u5141\u8bb8gh-ost\u8fd0\u884c\u5728\u53cc\u4e3b\u590d\u5236\u67b6\u6784\u4e2d\uff0c\u4e00\u822c\u4e0e-assume-master-host\u53c2\u6570\u4e00\u8d77\u4f7f\u7528 ghost_allow_nullable_unique_key false bool \u5141\u8bb8gh-ost\u5728\u6570\u636e\u8fc1\u79fb(migrate)\u4f9d\u8d56\u7684\u552f\u4e00\u952e\u53ef\u4ee5\u4e3aNULL\uff0c\u9ed8\u8ba4\u4e3a\u4e0d\u5141\u8bb8\u4e3aNULL\u7684\u552f\u4e00\u952e\u3002\u5982\u679c\u6570\u636e\u8fc1\u79fb(migrate)\u4f9d\u8d56\u7684\u552f\u4e00\u952e\u5141\u8bb8NULL\u503c\uff0c\u5219\u53ef\u80fd\u9020\u6210\u6570\u636e\u4e0d\u6b63\u786e\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 ghost_allow_on_master true bool \u5141\u8bb8gh-ost\u76f4\u63a5\u8fd0\u884c\u5728\u4e3b\u5e93\u4e0a\u3002\u9ed8\u8ba4gh-ost\u8fde\u63a5\u7684 \u4e3b\u5e93 \u3002 (\u6682\u672a\u6dfb\u52a0\u4ece\u5e93\u5730\u5740\u7684\u914d\u7f6e) ghost_approve_renamed_columns true bool \u5982\u679c\u652f\u6301\u4fee\u6539\u5217\u540d,\u5219\u9700\u8bbe\u7f6e\u6b64\u53c2\u6570\u4e3a true ,\u5426\u5219gh-ost\u4e0d\u4f1a\u6267\u884c\u3002 ghost_assume_master_host string \u4e3agh-ost\u6307\u5b9a\u4e00\u4e2a\u4e3b\u5e93\uff0c\u683c\u5f0f\u4e3a\"ip:port\"\u6216\u8005\"hostname:port\"\u3002\u9ed8\u8ba4\u63a8\u8350gh-ost\u8fde\u63a5\u4ece\u5e93\u3002 ghost_assume_rbr true bool \u786e\u8ba4gh-ost\u8fde\u63a5\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u7684binlog_format=ROW\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u6307\u5b9a-assume-rbr\uff0c\u8fd9\u6837\u53ef\u4ee5\u7981\u6b62\u4ece\u5e93\u4e0a\u8fd0\u884cstop slave,start slave,\u6267\u884cgh-ost\u7528\u6237\u4e5f\u4e0d\u9700\u8981SUPER\u6743\u9650\u3002 \u4e3a\u907f\u514d\u5f71\u54cd\u751f\u4ea7\u6570\u636e\u5e93\uff0c\u6b64\u53c2\u6570\u5efa\u8bae\u7f6e\u4e3atrue ghost_chunk_size 1000 int \u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5904\u7406\u7684\u884c\u6570\u91cf(\u5141\u8bb8\u8303\u56f4\uff1a100-100000)\uff0c\u9ed8\u8ba4\u503c\u4e3a1000\u3002 ghost_concurrent_rowcount true bool \u8be5\u53c2\u6570\u5982\u679c\u4e3aTrue(\u9ed8\u8ba4\u503c)\uff0c\u5219\u8fdb\u884crow-copy\u4e4b\u540e\uff0c\u4f30\u7b97\u7edf\u8ba1\u884c\u6570(\u4f7f\u7528explain select count(*)\u65b9\u5f0f)\uff0c\u5e76\u8c03\u6574ETA\u65f6\u95f4\uff0c\u5426\u5219\uff0cgh-ost\u9996\u5148\u9884\u4f30\u7edf\u8ba1\u884c\u6570\uff0c\u7136\u540e\u5f00\u59cbrow-copy\u3002 ghost_critical_load_hibernate_seconds 0 int \u8d1f\u8f7d\u8fbe\u5230critical-load\u65f6\uff0cgh-ost\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u8fdb\u5165\u4f11\u7720\u72b6\u6001\u3002 \u5b83\u4e0d\u4f1a\u8bfb/\u5199\u4efb\u4f55\u6765\u81ea\u4efb\u4f55\u670d\u52a1\u5668\u7684\u4efb\u4f55\u5185\u5bb9\u3002 ghost_critical_load_interval_millis 0 int \u5f53\u503c\u4e3a0\u65f6\uff0c\u5f53\u8fbe\u5230-critical-load\uff0cgh-ost\u7acb\u5373\u9000\u51fa\u3002\u5f53\u503c\u4e0d\u4e3a0\u65f6\uff0c\u5f53\u8fbe\u5230-critical-load\uff0cgh-ost\u4f1a\u5728-critical-load-interval-millis\u79d2\u6570\u540e\uff0c\u518d\u6b21\u8fdb\u884c\u68c0\u67e5\uff0c\u518d\u6b21\u68c0\u67e5\u4f9d\u65e7\u8fbe\u5230-critical-load\uff0cgh-ost\u5c06\u4f1a\u9000\u51fa\u3002 ghost_cut_over atomic string \u9009\u62e9cut-over\u7c7b\u578b:atomic/two-step\uff0catomic(\u9ed8\u8ba4)\u7c7b\u578b\u7684cut-over\u662fgithub\u7684\u7b97\u6cd5\uff0ctwo-step\u91c7\u7528\u7684\u662ffacebook-OSC\u7684\u7b97\u6cd5\u3002 ghost_cut_over_exponential_backoff false bool Wait exponentially longer intervals between failed cut-over attempts. Wait intervals obey a maximum configurable with 'exponential-backoff-max-interval'). ghost_cut_over_lock_timeout_seconds 3 int gh-ost\u5728cut-over\u9636\u6bb5\u6700\u5927\u7684\u9501\u7b49\u5f85\u65f6\u95f4\uff0c\u5f53\u9501\u8d85\u65f6\u65f6\uff0cgh-ost\u7684cut-over\u5c06\u91cd\u8bd5\u3002(\u9ed8\u8ba4\u503c\uff1a3) ghost_default_retries 60 int \u5404\u79cd\u64cd\u4f5c\u5728panick\u524d\u91cd\u8bd5\u6b21\u6570\u3002(\u9ed8\u8ba4\u4e3a60) ghost_discard_foreign_keys false bool \u8be5\u53c2\u6570\u9488\u5bf9\u4e00\u4e2a\u6709\u5916\u952e\u7684\u8868\uff0c\u5728gh-ost\u521b\u5efaghost\u8868\u65f6\uff0c\u5e76\u4e0d\u4f1a\u4e3aghost\u8868\u521b\u5efa\u5916\u952e\u3002\u8be5\u53c2\u6570\u5f88\u9002\u5408\u7528\u4e8e\u5220\u9664\u5916\u952e\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 ghost_dml_batch_size 10 int \u5728\u5355\u4e2a\u4e8b\u52a1\u4e2d\u5e94\u7528DML\u4e8b\u4ef6\u7684\u6279\u91cf\u5927\u5c0f\uff08\u8303\u56f41-100\uff09\uff08\u9ed8\u8ba4\u503c\u4e3a10\uff09 ghost_exact_rowcount false bool \u51c6\u786e\u7edf\u8ba1\u8868\u884c\u6570(\u4f7f\u7528select count(*)\u7684\u65b9\u5f0f)\uff0c\u5f97\u5230\u66f4\u51c6\u786e\u7684\u9884\u4f30\u65f6\u95f4\u3002 ghost_exponential_backoff_max_interval 64 int Maximum number of seconds to wait between attempts when performing various operations with exponential backoff. (default 64) ghost_force_named_cut_over false bool When true, the \u2018unpostpone ghost_force_table_names string table name prefix to be used on the temporary tables ghost_gcp false bool google\u4e91\u5e73\u53f0\u652f\u6301 ghost_heartbeat_interval_millis 500 int gh-ost\u5fc3\u8df3\u9891\u7387\u503c\uff0c\u9ed8\u8ba4\u4e3a500\u3002 ghost_initially_drop_ghost_table false bool gh-ost\u64cd\u4f5c\u4e4b\u524d\uff0c\u68c0\u67e5\u5e76\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684ghost\u8868\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u8bf7\u624b\u52a8\u5904\u7406\u539f\u6765\u5b58\u5728\u7684ghost\u8868\u3002 ghost_initially_drop_old_table false bool gh-ost\u64cd\u4f5c\u4e4b\u524d\uff0c\u68c0\u67e5\u5e76\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684\u65e7\u8868\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u8bf7\u624b\u52a8\u5904\u7406\u539f\u6765\u5b58\u5728\u7684ghost\u8868\u3002 ghost_initially_drop_socket_file false bool gh-ost\u5f3a\u5236\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684socket\u6587\u4ef6\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u53ef\u80fd\u4f1a\u5220\u9664\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684gh-ost\u7a0b\u5e8f\uff0c\u5bfc\u81f4DDL\u5931\u8d25\u3002 ghost_max_lag_millis 1500 int \u4e3b\u4ece\u590d\u5236\u6700\u5927\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5f53\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u65f6\u95f4\u8d85\u8fc7\u8be5\u503c\u540e\uff0cgh-ost\u5c06\u91c7\u53d6\u8282\u6d41(throttle)\u63aa\u65bd\uff0c\u9ed8\u8ba4\u503c\uff1a1500s\u3002 ghost_nice_ratio 0 float \u6bcf\u6b21chunk\u65f6\u95f4\u6bb5\u7684\u4f11\u7720\u65f6\u95f4\uff0c\u8303\u56f4[0.0...100.0]\u3002e.g:0\uff1a\u6bcf\u4e2achunk\u65f6\u95f4\u6bb5\u4e0d\u4f11\u7720\uff0c\u5373\u4e00\u4e2achunk\u63a5\u7740\u4e00\u4e2achunk\u6267\u884c\uff1b1\uff1a\u6bcfrow-copy 1\u6beb\u79d2\uff0c\u5219\u53e6\u5916\u4f11\u77201\u6beb\u79d2\uff1b0.7\uff1a\u6bcfrow-copy 10\u6beb\u79d2\uff0c\u5219\u53e6\u5916\u4f11\u77207\u6beb\u79d2\u3002 ghost_ok_to_drop_table true bool gh-ost\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u5220\u9664\u65e7\u8868\uff0c\u9ed8\u8ba4\u72b6\u6001\u662f \u5220\u9664\u65e7\u8868 \u3002 ghost_postpone_cut_over_flag_file string \u5f53\u8fd9\u4e2a\u6587\u4ef6\u5b58\u5728\u7684\u65f6\u5019\uff0cgh-ost\u7684cut-over\u9636\u6bb5\u5c06\u4f1a\u88ab\u63a8\u8fdf\uff0c\u76f4\u5230\u8be5\u6587\u4ef6\u88ab\u5220\u9664\u3002 ghost_replication_lag_query string \u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684SQL\u8bed\u53e5\uff0c\u9ed8\u8ba4gh-ost\u901a\u8fc7show slave status\u83b7\u53d6Seconds_behind_master\u4f5c\u4e3a\u4e3b\u4ece\u5ef6\u8fdf\u65f6\u95f4\u4f9d\u636e\u3002\u5982\u679c\u4f7f\u7528pt-heartbeat\u5de5\u5177\uff0c\u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684SQL\u8bed\u53e5\u7c7b\u4f3c\u4e8e: SELECT ROUND(UNIX_TIMESTAMP() - MAX(UNIX_TIMESTAMP(ts))) AS delay FROM my_schema.heartbeat ; ghost_skip_foreign_key_checks true bool \u8df3\u8fc7\u5916\u952e\u68c0\u67e5,\u9ed8\u8ba4\u4e3a true ghost_throttle_additional_flag_file string \u5f53\u8be5\u6587\u4ef6\u88ab\u521b\u5efa\u540e\uff0cgh-ost\u64cd\u4f5c\u7acb\u5373\u505c\u6b62\u3002\u8be5\u53c2\u6570\u53ef\u4ee5\u7528\u5728\u591a\u4e2agh-ost\u540c\u65f6\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u8ba9\u6240\u6709\u7684gh-ost\u64cd\u4f5c\u505c\u6b62\uff0c\u6216\u8005\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff0c\u8ba9\u6240\u6709\u7684gh-ost\u64cd\u4f5c\u6062\u590d\u3002 ghost_throttle_control_replicas string \u5217\u51fa\u6240\u6709\u9700\u8981\u88ab\u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684\u4ece\u5e93\u3002 ghost_throttle_flag_file string \u5f53\u8be5\u6587\u4ef6\u88ab\u521b\u5efa\u540e\uff0cgh-ost\u64cd\u4f5c\u7acb\u5373\u505c\u6b62\u3002\u8be5\u53c2\u6570\u9002\u5408\u63a7\u5236\u5355\u4e2agh-ost\u64cd\u4f5c\u3002-throttle-additional-flag-file string\u9002\u5408\u63a7\u5236\u591a\u4e2agh-ost\u64cd\u4f5c\u3002 ghost_throttle_http string The --throttle-http flag allows for throttling via HTTP. Every 100ms gh-ost issues a HEAD request to the provided URL. If the response status code is not 200 throttling will kick in until a 200 response status code is returned. ghost_throttle_query string \u8282\u6d41\u67e5\u8be2\u3002\u6bcf\u79d2\u949f\u6267\u884c\u4e00\u6b21\u3002\u5f53\u8fd4\u56de\u503c=0\u65f6\u4e0d\u9700\u8981\u8282\u6d41\uff0c\u5f53\u8fd4\u56de\u503c>0\u65f6\uff0c\u9700\u8981\u6267\u884c\u8282\u6d41\u64cd\u4f5c\u3002\u8be5\u67e5\u8be2\u4f1a\u5728\u6570\u636e\u8fc1\u79fb(migrated)\u670d\u52a1\u5668\u4e0a\u64cd\u4f5c\uff0c\u6240\u4ee5\u8bf7\u786e\u4fdd\u8be5\u67e5\u8be2\u662f\u8f7b\u91cf\u7ea7\u7684\u3002 ghost_timestamp_old_table false bool \u5728\u65e7\u8868\u540d\u4e2d\u4f7f\u7528\u65f6\u95f4\u6233\u3002 \u8fd9\u4f1a\u4f7f\u65e7\u8868\u540d\u79f0\u5177\u6709\u552f\u4e00\u4e14\u65e0\u51b2\u7a81\u7684\u4ea4\u53c9\u8fc1\u79fb ghost_tungsten false bool \u544a\u8bc9gh-ost\u4f60\u6b63\u5728\u8fd0\u884c\u7684\u662f\u4e00\u4e2atungsten-replication\u62d3\u6251\u7ed3\u6784\u3002","title":"DDL\u53d8\u66f4:gh-ost"},{"location":"ghost/#gh-ost","text":"\u5185\u7f6egh-ost\u6e90\u7801( v1.0.48 )\uff0c\u56e0\u6b64\u65e0\u987b\u4e0b\u8f7d\u3002 \u624b\u52a8\u7ec8\u6b62\u548c\u6682\u505c\u53ca\u6062\u590d\u529f\u80fd\u5df2\u5f00\u653e\u76f8\u5e94\u547d\u4ee4\uff0c\u56e0\u6b64\u9690\u85cf\u76f8\u5173\u53c2\u6570\u3002","title":"gh-ost"},{"location":"ghost/#_1","text":"gh-ost\u5de5\u5177\u7684\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53ef\u4ee5\u901a\u8fc7 inception show variables like 'ghost%'; \u67e5\u770b inception show variables like 'ghost%'; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set osc_check_interval = 10; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8","title":"\u53c2\u6570\u8bbe\u7f6e"},{"location":"ghost/#_2","text":"","title":"\u8fdb\u7a0b\u547d\u4ee4"},{"location":"ghost/#osc","text":"inception get osc processlist; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME COMMAND SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 alter table t1 add column c33 int *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 9 00:36 Copying test_inc . t1 : 9% 00:36 remain","title":"\u67e5\u770bosc\u8fdb\u7a0b"},{"location":"ghost/#osc_1","text":"inception get osc_percent '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 49 00:14 Copying test_inc . t1 : 49% 00:14 remain","title":"\u67e5\u770b\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"ghost/#osc_2","text":"\u7ec8\u6b62\u540e\u6ce8\u610f\u624b\u52a8\u6e05\u7406\u76f8\u5173\u8f85\u52a9\u8868 inception kill osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception stop alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F';","title":"\u7ec8\u6b62\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"ghost/#osc_3","text":"inception pause osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception pause alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F';","title":"\u6682\u505c\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"ghost/#osc_4","text":"inception resume osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception resume alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F';","title":"\u6062\u590d\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"ghost/#pt-osc","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e osc_critical_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_critical_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_running\u90e8\u5206 osc_max_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_max_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_running\u90e8\u5206 osc_min_table_size 16 int OSC\u7684\u5f00\u5173\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u5168\u90e8ALTER\u8bed\u53e5\u90fd\u8d70OSC\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u975e0\uff0c\u5219\u5f53\u8fd9\u4e2a\u8868\u5360\u7528\u7a7a\u95f4\u5927\u5c0f\u5927\u4e8e\u8fd9\u4e2a\u503c\u65f6\u624d\u4f7f\u7528OSC\u65b9\u5f0f\u3002\u5355\u4f4d\u4e3aM\uff0c\u8fd9\u4e2a\u8868\u5927\u5c0f\u7684\u8ba1\u7b97\u65b9\u5f0f\u662f\u901a\u8fc7\u8bed\u53e5\uff1a select (DATA_LENGTH + INDEX_LENGTH)/1024/1024 from information_schema.tables where table_schema = \"dbname\" and table_name = \"tablename\"\u6765\u5b9e\u73b0\u7684\u3002 osc_print_none false bool \u7528\u6765\u8bbe\u7f6e\u5728Inception\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\uff0c\u5bf9\u4e8e\u539f\u6765OSC\u5728\u6267\u884c\u8fc7\u7a0b\u7684\u6807\u51c6\u8f93\u51fa\u4fe1\u606f\u662f\u4e0d\u662f\u8981\u6253\u5370\u5230\u7ed3\u679c\u96c6\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u5217\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u5c31\u4e0d\u6253\u5370\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5c31\u6253\u5370\u3002\u800c\u5982\u679c\u51fa\u73b0\u9519\u8bef\u4e86\uff0c\u5219\u90fd\u4f1a\u6253\u5370","title":"\u590d\u7528pt-osc\u53c2\u6570"},{"location":"ghost/#_3","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e ghost_on false bool gh-ost\u5f00\u5173 ghost_aliyun_rds false bool \u963f\u91cc\u4e91rds\u6570\u636e\u5e93\u6807\u5fd7 ghost_allow_master_master false bool \u5141\u8bb8gh-ost\u8fd0\u884c\u5728\u53cc\u4e3b\u590d\u5236\u67b6\u6784\u4e2d\uff0c\u4e00\u822c\u4e0e-assume-master-host\u53c2\u6570\u4e00\u8d77\u4f7f\u7528 ghost_allow_nullable_unique_key false bool \u5141\u8bb8gh-ost\u5728\u6570\u636e\u8fc1\u79fb(migrate)\u4f9d\u8d56\u7684\u552f\u4e00\u952e\u53ef\u4ee5\u4e3aNULL\uff0c\u9ed8\u8ba4\u4e3a\u4e0d\u5141\u8bb8\u4e3aNULL\u7684\u552f\u4e00\u952e\u3002\u5982\u679c\u6570\u636e\u8fc1\u79fb(migrate)\u4f9d\u8d56\u7684\u552f\u4e00\u952e\u5141\u8bb8NULL\u503c\uff0c\u5219\u53ef\u80fd\u9020\u6210\u6570\u636e\u4e0d\u6b63\u786e\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 ghost_allow_on_master true bool \u5141\u8bb8gh-ost\u76f4\u63a5\u8fd0\u884c\u5728\u4e3b\u5e93\u4e0a\u3002\u9ed8\u8ba4gh-ost\u8fde\u63a5\u7684 \u4e3b\u5e93 \u3002 (\u6682\u672a\u6dfb\u52a0\u4ece\u5e93\u5730\u5740\u7684\u914d\u7f6e) ghost_approve_renamed_columns true bool \u5982\u679c\u652f\u6301\u4fee\u6539\u5217\u540d,\u5219\u9700\u8bbe\u7f6e\u6b64\u53c2\u6570\u4e3a true ,\u5426\u5219gh-ost\u4e0d\u4f1a\u6267\u884c\u3002 ghost_assume_master_host string \u4e3agh-ost\u6307\u5b9a\u4e00\u4e2a\u4e3b\u5e93\uff0c\u683c\u5f0f\u4e3a\"ip:port\"\u6216\u8005\"hostname:port\"\u3002\u9ed8\u8ba4\u63a8\u8350gh-ost\u8fde\u63a5\u4ece\u5e93\u3002 ghost_assume_rbr true bool \u786e\u8ba4gh-ost\u8fde\u63a5\u7684\u6570\u636e\u5e93\u5b9e\u4f8b\u7684binlog_format=ROW\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u6307\u5b9a-assume-rbr\uff0c\u8fd9\u6837\u53ef\u4ee5\u7981\u6b62\u4ece\u5e93\u4e0a\u8fd0\u884cstop slave,start slave,\u6267\u884cgh-ost\u7528\u6237\u4e5f\u4e0d\u9700\u8981SUPER\u6743\u9650\u3002 \u4e3a\u907f\u514d\u5f71\u54cd\u751f\u4ea7\u6570\u636e\u5e93\uff0c\u6b64\u53c2\u6570\u5efa\u8bae\u7f6e\u4e3atrue ghost_chunk_size 1000 int \u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5904\u7406\u7684\u884c\u6570\u91cf(\u5141\u8bb8\u8303\u56f4\uff1a100-100000)\uff0c\u9ed8\u8ba4\u503c\u4e3a1000\u3002 ghost_concurrent_rowcount true bool \u8be5\u53c2\u6570\u5982\u679c\u4e3aTrue(\u9ed8\u8ba4\u503c)\uff0c\u5219\u8fdb\u884crow-copy\u4e4b\u540e\uff0c\u4f30\u7b97\u7edf\u8ba1\u884c\u6570(\u4f7f\u7528explain select count(*)\u65b9\u5f0f)\uff0c\u5e76\u8c03\u6574ETA\u65f6\u95f4\uff0c\u5426\u5219\uff0cgh-ost\u9996\u5148\u9884\u4f30\u7edf\u8ba1\u884c\u6570\uff0c\u7136\u540e\u5f00\u59cbrow-copy\u3002 ghost_critical_load_hibernate_seconds 0 int \u8d1f\u8f7d\u8fbe\u5230critical-load\u65f6\uff0cgh-ost\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u8fdb\u5165\u4f11\u7720\u72b6\u6001\u3002 \u5b83\u4e0d\u4f1a\u8bfb/\u5199\u4efb\u4f55\u6765\u81ea\u4efb\u4f55\u670d\u52a1\u5668\u7684\u4efb\u4f55\u5185\u5bb9\u3002 ghost_critical_load_interval_millis 0 int \u5f53\u503c\u4e3a0\u65f6\uff0c\u5f53\u8fbe\u5230-critical-load\uff0cgh-ost\u7acb\u5373\u9000\u51fa\u3002\u5f53\u503c\u4e0d\u4e3a0\u65f6\uff0c\u5f53\u8fbe\u5230-critical-load\uff0cgh-ost\u4f1a\u5728-critical-load-interval-millis\u79d2\u6570\u540e\uff0c\u518d\u6b21\u8fdb\u884c\u68c0\u67e5\uff0c\u518d\u6b21\u68c0\u67e5\u4f9d\u65e7\u8fbe\u5230-critical-load\uff0cgh-ost\u5c06\u4f1a\u9000\u51fa\u3002 ghost_cut_over atomic string \u9009\u62e9cut-over\u7c7b\u578b:atomic/two-step\uff0catomic(\u9ed8\u8ba4)\u7c7b\u578b\u7684cut-over\u662fgithub\u7684\u7b97\u6cd5\uff0ctwo-step\u91c7\u7528\u7684\u662ffacebook-OSC\u7684\u7b97\u6cd5\u3002 ghost_cut_over_exponential_backoff false bool Wait exponentially longer intervals between failed cut-over attempts. Wait intervals obey a maximum configurable with 'exponential-backoff-max-interval'). ghost_cut_over_lock_timeout_seconds 3 int gh-ost\u5728cut-over\u9636\u6bb5\u6700\u5927\u7684\u9501\u7b49\u5f85\u65f6\u95f4\uff0c\u5f53\u9501\u8d85\u65f6\u65f6\uff0cgh-ost\u7684cut-over\u5c06\u91cd\u8bd5\u3002(\u9ed8\u8ba4\u503c\uff1a3) ghost_default_retries 60 int \u5404\u79cd\u64cd\u4f5c\u5728panick\u524d\u91cd\u8bd5\u6b21\u6570\u3002(\u9ed8\u8ba4\u4e3a60) ghost_discard_foreign_keys false bool \u8be5\u53c2\u6570\u9488\u5bf9\u4e00\u4e2a\u6709\u5916\u952e\u7684\u8868\uff0c\u5728gh-ost\u521b\u5efaghost\u8868\u65f6\uff0c\u5e76\u4e0d\u4f1a\u4e3aghost\u8868\u521b\u5efa\u5916\u952e\u3002\u8be5\u53c2\u6570\u5f88\u9002\u5408\u7528\u4e8e\u5220\u9664\u5916\u952e\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 ghost_dml_batch_size 10 int \u5728\u5355\u4e2a\u4e8b\u52a1\u4e2d\u5e94\u7528DML\u4e8b\u4ef6\u7684\u6279\u91cf\u5927\u5c0f\uff08\u8303\u56f41-100\uff09\uff08\u9ed8\u8ba4\u503c\u4e3a10\uff09 ghost_exact_rowcount false bool \u51c6\u786e\u7edf\u8ba1\u8868\u884c\u6570(\u4f7f\u7528select count(*)\u7684\u65b9\u5f0f)\uff0c\u5f97\u5230\u66f4\u51c6\u786e\u7684\u9884\u4f30\u65f6\u95f4\u3002 ghost_exponential_backoff_max_interval 64 int Maximum number of seconds to wait between attempts when performing various operations with exponential backoff. (default 64) ghost_force_named_cut_over false bool When true, the \u2018unpostpone ghost_force_table_names string table name prefix to be used on the temporary tables ghost_gcp false bool google\u4e91\u5e73\u53f0\u652f\u6301 ghost_heartbeat_interval_millis 500 int gh-ost\u5fc3\u8df3\u9891\u7387\u503c\uff0c\u9ed8\u8ba4\u4e3a500\u3002 ghost_initially_drop_ghost_table false bool gh-ost\u64cd\u4f5c\u4e4b\u524d\uff0c\u68c0\u67e5\u5e76\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684ghost\u8868\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u8bf7\u624b\u52a8\u5904\u7406\u539f\u6765\u5b58\u5728\u7684ghost\u8868\u3002 ghost_initially_drop_old_table false bool gh-ost\u64cd\u4f5c\u4e4b\u524d\uff0c\u68c0\u67e5\u5e76\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684\u65e7\u8868\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u8bf7\u624b\u52a8\u5904\u7406\u539f\u6765\u5b58\u5728\u7684ghost\u8868\u3002 ghost_initially_drop_socket_file false bool gh-ost\u5f3a\u5236\u5220\u9664\u5df2\u7ecf\u5b58\u5728\u7684socket\u6587\u4ef6\u3002\u8be5\u53c2\u6570\u4e0d\u5efa\u8bae\u4f7f\u7528\uff0c\u53ef\u80fd\u4f1a\u5220\u9664\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684gh-ost\u7a0b\u5e8f\uff0c\u5bfc\u81f4DDL\u5931\u8d25\u3002 ghost_max_lag_millis 1500 int \u4e3b\u4ece\u590d\u5236\u6700\u5927\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5f53\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u65f6\u95f4\u8d85\u8fc7\u8be5\u503c\u540e\uff0cgh-ost\u5c06\u91c7\u53d6\u8282\u6d41(throttle)\u63aa\u65bd\uff0c\u9ed8\u8ba4\u503c\uff1a1500s\u3002 ghost_nice_ratio 0 float \u6bcf\u6b21chunk\u65f6\u95f4\u6bb5\u7684\u4f11\u7720\u65f6\u95f4\uff0c\u8303\u56f4[0.0...100.0]\u3002e.g:0\uff1a\u6bcf\u4e2achunk\u65f6\u95f4\u6bb5\u4e0d\u4f11\u7720\uff0c\u5373\u4e00\u4e2achunk\u63a5\u7740\u4e00\u4e2achunk\u6267\u884c\uff1b1\uff1a\u6bcfrow-copy 1\u6beb\u79d2\uff0c\u5219\u53e6\u5916\u4f11\u77201\u6beb\u79d2\uff1b0.7\uff1a\u6bcfrow-copy 10\u6beb\u79d2\uff0c\u5219\u53e6\u5916\u4f11\u77207\u6beb\u79d2\u3002 ghost_ok_to_drop_table true bool gh-ost\u64cd\u4f5c\u7ed3\u675f\u540e\uff0c\u5220\u9664\u65e7\u8868\uff0c\u9ed8\u8ba4\u72b6\u6001\u662f \u5220\u9664\u65e7\u8868 \u3002 ghost_postpone_cut_over_flag_file string \u5f53\u8fd9\u4e2a\u6587\u4ef6\u5b58\u5728\u7684\u65f6\u5019\uff0cgh-ost\u7684cut-over\u9636\u6bb5\u5c06\u4f1a\u88ab\u63a8\u8fdf\uff0c\u76f4\u5230\u8be5\u6587\u4ef6\u88ab\u5220\u9664\u3002 ghost_replication_lag_query string \u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684SQL\u8bed\u53e5\uff0c\u9ed8\u8ba4gh-ost\u901a\u8fc7show slave status\u83b7\u53d6Seconds_behind_master\u4f5c\u4e3a\u4e3b\u4ece\u5ef6\u8fdf\u65f6\u95f4\u4f9d\u636e\u3002\u5982\u679c\u4f7f\u7528pt-heartbeat\u5de5\u5177\uff0c\u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684SQL\u8bed\u53e5\u7c7b\u4f3c\u4e8e: SELECT ROUND(UNIX_TIMESTAMP() - MAX(UNIX_TIMESTAMP(ts))) AS delay FROM my_schema.heartbeat ; ghost_skip_foreign_key_checks true bool \u8df3\u8fc7\u5916\u952e\u68c0\u67e5,\u9ed8\u8ba4\u4e3a true ghost_throttle_additional_flag_file string \u5f53\u8be5\u6587\u4ef6\u88ab\u521b\u5efa\u540e\uff0cgh-ost\u64cd\u4f5c\u7acb\u5373\u505c\u6b62\u3002\u8be5\u53c2\u6570\u53ef\u4ee5\u7528\u5728\u591a\u4e2agh-ost\u540c\u65f6\u64cd\u4f5c\u7684\u65f6\u5019\uff0c\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff0c\u8ba9\u6240\u6709\u7684gh-ost\u64cd\u4f5c\u505c\u6b62\uff0c\u6216\u8005\u5220\u9664\u8fd9\u4e2a\u6587\u4ef6\uff0c\u8ba9\u6240\u6709\u7684gh-ost\u64cd\u4f5c\u6062\u590d\u3002 ghost_throttle_control_replicas string \u5217\u51fa\u6240\u6709\u9700\u8981\u88ab\u68c0\u67e5\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u7684\u4ece\u5e93\u3002 ghost_throttle_flag_file string \u5f53\u8be5\u6587\u4ef6\u88ab\u521b\u5efa\u540e\uff0cgh-ost\u64cd\u4f5c\u7acb\u5373\u505c\u6b62\u3002\u8be5\u53c2\u6570\u9002\u5408\u63a7\u5236\u5355\u4e2agh-ost\u64cd\u4f5c\u3002-throttle-additional-flag-file string\u9002\u5408\u63a7\u5236\u591a\u4e2agh-ost\u64cd\u4f5c\u3002 ghost_throttle_http string The --throttle-http flag allows for throttling via HTTP. Every 100ms gh-ost issues a HEAD request to the provided URL. If the response status code is not 200 throttling will kick in until a 200 response status code is returned. ghost_throttle_query string \u8282\u6d41\u67e5\u8be2\u3002\u6bcf\u79d2\u949f\u6267\u884c\u4e00\u6b21\u3002\u5f53\u8fd4\u56de\u503c=0\u65f6\u4e0d\u9700\u8981\u8282\u6d41\uff0c\u5f53\u8fd4\u56de\u503c>0\u65f6\uff0c\u9700\u8981\u6267\u884c\u8282\u6d41\u64cd\u4f5c\u3002\u8be5\u67e5\u8be2\u4f1a\u5728\u6570\u636e\u8fc1\u79fb(migrated)\u670d\u52a1\u5668\u4e0a\u64cd\u4f5c\uff0c\u6240\u4ee5\u8bf7\u786e\u4fdd\u8be5\u67e5\u8be2\u662f\u8f7b\u91cf\u7ea7\u7684\u3002 ghost_timestamp_old_table false bool \u5728\u65e7\u8868\u540d\u4e2d\u4f7f\u7528\u65f6\u95f4\u6233\u3002 \u8fd9\u4f1a\u4f7f\u65e7\u8868\u540d\u79f0\u5177\u6709\u552f\u4e00\u4e14\u65e0\u51b2\u7a81\u7684\u4ea4\u53c9\u8fc1\u79fb ghost_tungsten false bool \u544a\u8bc9gh-ost\u4f60\u6b63\u5728\u8fd0\u884c\u7684\u662f\u4e00\u4e2atungsten-replication\u62d3\u6251\u7ed3\u6784\u3002","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"install/","text":"\u4e8c\u8fdb\u5236\u5b89\u88c5 goInception\u5b89\u88c5\u5305 \u6e90\u7801\u5b89\u88c5 go\u7248\u672cv1.11.3 \u4f7f\u7528go mod\u505a\u4f9d\u8d56\u7ba1\u7406 # \u4e0b\u8f7d\u6e90\u7801 git clone https://github.com/hanchuanchuan/goInception cd goInception make parser # \u6784\u5efa\u4e8c\u8fdb\u5236\u5305 go build -o goInception tidb-server/main.go \u542f\u52a8(\u6ce8\u610f\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6) ./goInception -config=config/config.toml","title":"\u5b89\u88c5"},{"location":"install/#_1","text":"goInception\u5b89\u88c5\u5305","title":"\u4e8c\u8fdb\u5236\u5b89\u88c5"},{"location":"install/#_2","text":"go\u7248\u672cv1.11.3 \u4f7f\u7528go mod\u505a\u4f9d\u8d56\u7ba1\u7406 # \u4e0b\u8f7d\u6e90\u7801 git clone https://github.com/hanchuanchuan/goInception cd goInception make parser # \u6784\u5efa\u4e8c\u8fdb\u5236\u5305 go build -o goInception tidb-server/main.go","title":"\u6e90\u7801\u5b89\u88c5"},{"location":"install/#_3","text":"./goInception -config=config/config.toml","title":"\u542f\u52a8(\u6ce8\u610f\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6)"},{"location":"options/","text":"\u652f\u6301\u53c2\u6570 goInception\u7684\u5ba1\u6838\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7 inception show variables; \u67e5\u770b inception show variables; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set check_dml_limit = true; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e check_autoincrement_datatype false true,false \u5f53\u5efa\u8868\u65f6\u81ea\u589e\u5217\u7684\u7c7b\u578b\u4e0d\u4e3aint\u6216\u8005bigint\u65f6\u62a5\u9519 check_autoincrement_init_value false true,false \u5f53\u5efa\u8868\u65f6\u81ea\u589e\u5217\u7684\u503c\u6307\u5b9a\u7684\u4e0d\u4e3a1\uff0c\u5219\u62a5\u9519 check_autoincrement_name false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6307\u5b9a\u7684\u81ea\u589e\u5217\u7684\u540d\u5b57\u4e0d\u4e3aID\uff0c\u5219\u62a5\u9519\uff0c\u8bf4\u660e\u662f\u6709\u610f\u4e49\u7684\uff0c\u7ed9\u63d0\u793a check_column_comment false true,false \u5efa\u8868\u65f6\uff0c\u5217\u6ca1\u6709\u6ce8\u91ca\u65f6\u62a5\u9519 check_column_default_value false true,false \u68c0\u67e5\u5728\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u65f6\uff0c\u65b0\u7684\u5217\u5c5e\u6027\u662f\u4e0d\u662f\u8981\u6709\u9ed8\u8ba4\u503c check_dml_limit false true,false \u5728DML\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86LIMIT\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_dml_orderby false true,false \u5728DML\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86Order By\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_dml_where false true,false \u5728DML\u8bed\u53e5\u4e2d\u6ca1\u6709WHERE\u6761\u4ef6\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_identifier false true,false \u68c0\u67e5\u6807\u8bc6\u7b26\u662f\u5426\u6b63\u786e,\u89c4\u5219\u662f[a-z,A-Z,0-9,_] check_index_prefix false true,false \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u7d22\u5f15\u540d\u5b57\u524d\u7f00\u4e3a\"idx_\"\uff0c\u68c0\u67e5\u552f\u4e00\u7d22\u5f15\u524d\u7f00\u662f\u4e0d\u662f\"uniq_\" check_insert_field false true,false \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u63d2\u5165\u8bed\u53e5\u4e2d\u7684\u5217\u94fe\u8868\u7684\u5b58\u5728\u6027 check_primary_key false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3b\u952e\uff0c\u5219\u62a5\u9519 check_table_comment false true,false \u5efa\u8868\u65f6\uff0c\u8868\u6ca1\u6709\u6ce8\u91ca\u65f6\u62a5\u9519 check_timestamp_count v0.6.0 false true,false \u914d\u7f6e\u662f\u5426\u68c0\u67e5current_timestamp\u6570\u91cf check_timestamp_default false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3atimestamp\u7c7b\u578b\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5219\u62a5\u9519 enable_autoincrement_unsigned false true,false \u81ea\u589e\u5217\u662f\u4e0d\u662f\u8981\u4e3a\u65e0\u7b26\u53f7\u578b enable_blob_type false true,false \u68c0\u67e5\u662f\u4e0d\u662f\u652f\u6301BLOB\u5b57\u6bb5\uff0c\u5305\u62ec\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u64cd\u4f5c enable_column_charset false true,false \u5141\u8bb8\u5217\u81ea\u5df1\u8bbe\u7f6e\u5b57\u7b26\u96c6 enable_drop_database false true,false \u662f\u5426\u5141\u8bb8\u5220\u9664\u6570\u636e\u5e93 enable_drop_table false true,false \u662f\u5426\u5141\u8bb8\u5220\u9664\u8868 enable_enum_set_bit false true,false \u662f\u4e0d\u662f\u652f\u6301enum,set,bit\u6570\u636e\u7c7b\u578b enable_fingerprint v0.6.2 false true,false sql\u6307\u7eb9\u529f\u80fd\u3002dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6 enable_foreign_key false true,false \u662f\u4e0d\u662f\u652f\u6301\u5916\u952e enable_identifer_keyword false true,false \u68c0\u67e5\u5728SQL\u8bed\u53e5\u4e2d\uff0c\u662f\u4e0d\u662f\u6709\u6807\u8bc6\u7b26\u88ab\u5199\u6210MySQL\u7684\u5173\u952e\u5b57\uff0c\u9ed8\u8ba4\u503c\u4e3a\u62a5\u8b66\u3002 enable_not_innodb false true,false \u5efa\u8868\u6307\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e3aInnodb\uff0c\u4e0d\u62a5\u9519 enable_nullable false true,false \u521b\u5efa\u6216\u8005\u65b0\u589e\u5217\u65f6\u5982\u679c\u5217\u4e3aNULL\uff0c\u662f\u4e0d\u662f\u62a5\u9519 enable_orderby_rand false true,false order by rand\u65f6\u662f\u4e0d\u662f\u62a5\u9519 enable_partition_table false true,false \u662f\u4e0d\u662f\u652f\u6301\u5206\u533a\u8868 enable_pk_columns_only_int false true,false \u662f\u5426\u5f3a\u5236\u4e3b\u952e\u5217\u5fc5\u987b\u662fint enable_select_star false true,false Select*\u65f6\u662f\u4e0d\u662f\u8981\u62a5\u9519 enable_set_charset false true,false \u662f\u5426\u5141\u8bb8\u6307\u5b9a\u8868\u548c\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6 lang v0.5.1 en-US en-US,zh-CN \u8fd4\u56de\u7684\u4fe1\u606f\u4f7f\u7528\u8bed\u8a00,\u53ef\u9009\u503c en-US , zh-CN max_char_length 0 int \u6700\u5927char\u957f\u5ea6,\u5f53\u8d85\u51fa\u65f6\u8b66\u544a\u8f6c\u6362\u4e3avarchar\u7c7b\u578b max_insert_rows v0.6.3 0 int \u8bbe\u7f6einsert values\u5141\u8bb8\u7684\u6700\u5927\u884c\u6570.0\u4e3a\u4e0d\u9650\u5236 max_key_parts 3 int \u4e00\u4e2a\u7d22\u5f15\u6700\u591a\u53ef\u6307\u5b9a\u7684\u5217\u6570 max_keys 3 int \u5355\u8868\u5141\u8bb8\u7684\u6700\u5927\u7d22\u5f15\u6570 max_primary_key_parts 3 int \u4e3b\u952e\u6700\u591a\u53ef\u6307\u5b9a\u7684\u5217\u6570 max_update_rows 5000 int \u5f53update/delete\u9884\u4f30\u53d7\u5f71\u54cd\u884c\u6570\u8d85\u51fa\u8bbe\u7f6e\u503c\u65f6\u8b66\u544a merge_alter_table false true,false \u5728\u591a\u4e2a\u6539\u540c\u4e00\u4e2a\u8868\u7684\u8bed\u53e5\u51fa\u73b0\u662f\uff0c\u62a5\u9519\uff0c\u63d0\u793a\u5408\u6210\u4e00\u4e2a must_have_columns v0.6.3 '' string \u7528\u4ee5\u6307\u5b9a\u5efa\u8868\u65f6\u5fc5\u987b\u521b\u5efa\u7684\u5217\u3002\u591a\u4e2a\u5217\u65f6\u4ee5\u9017\u53f7\u5206\u9694( \u683c\u5f0f: \u5217\u540d [\u5217\u7c7b\u578b,\u53ef\u9009] ) sql_safe_updates -1 -1,0,1 \u5b89\u5168\u66f4\u65b0.-1\u8868\u793a\u4e0d\u505a\u64cd\u4f5c,\u57fa\u4e8e\u8fdc\u7aef\u6570\u636e\u5e93,0\u8868\u793a\u5173\u95ed\u5b89\u5168\u66f4\u65b0,1\u8868\u793a\u5f00\u542f\u5b89\u5168\u66f4\u65b0 support_charset utf8,utf8mb4 string \u652f\u6301\u7684\u5b57\u7b26\u96c6\u96c6\u5408,\u591a\u4e2a\u5b57\u7b26\u96c6\u4ee5\u9017\u53f7\u5206\u9694","title":"\u5ba1\u6838\u89c4\u5219"},{"location":"options/#_1","text":"goInception\u7684\u5ba1\u6838\u89c4\u5219\u53ef\u4ee5\u901a\u8fc7 inception show variables; \u67e5\u770b inception show variables; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set check_dml_limit = true; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e check_autoincrement_datatype false true,false \u5f53\u5efa\u8868\u65f6\u81ea\u589e\u5217\u7684\u7c7b\u578b\u4e0d\u4e3aint\u6216\u8005bigint\u65f6\u62a5\u9519 check_autoincrement_init_value false true,false \u5f53\u5efa\u8868\u65f6\u81ea\u589e\u5217\u7684\u503c\u6307\u5b9a\u7684\u4e0d\u4e3a1\uff0c\u5219\u62a5\u9519 check_autoincrement_name false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6307\u5b9a\u7684\u81ea\u589e\u5217\u7684\u540d\u5b57\u4e0d\u4e3aID\uff0c\u5219\u62a5\u9519\uff0c\u8bf4\u660e\u662f\u6709\u610f\u4e49\u7684\uff0c\u7ed9\u63d0\u793a check_column_comment false true,false \u5efa\u8868\u65f6\uff0c\u5217\u6ca1\u6709\u6ce8\u91ca\u65f6\u62a5\u9519 check_column_default_value false true,false \u68c0\u67e5\u5728\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u65f6\uff0c\u65b0\u7684\u5217\u5c5e\u6027\u662f\u4e0d\u662f\u8981\u6709\u9ed8\u8ba4\u503c check_dml_limit false true,false \u5728DML\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86LIMIT\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_dml_orderby false true,false \u5728DML\u8bed\u53e5\u4e2d\u4f7f\u7528\u4e86Order By\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_dml_where false true,false \u5728DML\u8bed\u53e5\u4e2d\u6ca1\u6709WHERE\u6761\u4ef6\u65f6\uff0c\u662f\u4e0d\u662f\u8981\u62a5\u9519 check_identifier false true,false \u68c0\u67e5\u6807\u8bc6\u7b26\u662f\u5426\u6b63\u786e,\u89c4\u5219\u662f[a-z,A-Z,0-9,_] check_index_prefix false true,false \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u7d22\u5f15\u540d\u5b57\u524d\u7f00\u4e3a\"idx_\"\uff0c\u68c0\u67e5\u552f\u4e00\u7d22\u5f15\u524d\u7f00\u662f\u4e0d\u662f\"uniq_\" check_insert_field false true,false \u662f\u4e0d\u662f\u8981\u68c0\u67e5\u63d2\u5165\u8bed\u53e5\u4e2d\u7684\u5217\u94fe\u8868\u7684\u5b58\u5728\u6027 check_primary_key false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3b\u952e\uff0c\u5219\u62a5\u9519 check_table_comment false true,false \u5efa\u8868\u65f6\uff0c\u8868\u6ca1\u6709\u6ce8\u91ca\u65f6\u62a5\u9519 check_timestamp_count v0.6.0 false true,false \u914d\u7f6e\u662f\u5426\u68c0\u67e5current_timestamp\u6570\u91cf check_timestamp_default false true,false \u5efa\u8868\u65f6\uff0c\u5982\u679c\u6ca1\u6709\u4e3atimestamp\u7c7b\u578b\u6307\u5b9a\u9ed8\u8ba4\u503c\uff0c\u5219\u62a5\u9519 enable_autoincrement_unsigned false true,false \u81ea\u589e\u5217\u662f\u4e0d\u662f\u8981\u4e3a\u65e0\u7b26\u53f7\u578b enable_blob_type false true,false \u68c0\u67e5\u662f\u4e0d\u662f\u652f\u6301BLOB\u5b57\u6bb5\uff0c\u5305\u62ec\u5efa\u8868\u3001\u4fee\u6539\u5217\u3001\u65b0\u589e\u5217\u64cd\u4f5c enable_column_charset false true,false \u5141\u8bb8\u5217\u81ea\u5df1\u8bbe\u7f6e\u5b57\u7b26\u96c6 enable_drop_database false true,false \u662f\u5426\u5141\u8bb8\u5220\u9664\u6570\u636e\u5e93 enable_drop_table false true,false \u662f\u5426\u5141\u8bb8\u5220\u9664\u8868 enable_enum_set_bit false true,false \u662f\u4e0d\u662f\u652f\u6301enum,set,bit\u6570\u636e\u7c7b\u578b enable_fingerprint v0.6.2 false true,false sql\u6307\u7eb9\u529f\u80fd\u3002dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6 enable_foreign_key false true,false \u662f\u4e0d\u662f\u652f\u6301\u5916\u952e enable_identifer_keyword false true,false \u68c0\u67e5\u5728SQL\u8bed\u53e5\u4e2d\uff0c\u662f\u4e0d\u662f\u6709\u6807\u8bc6\u7b26\u88ab\u5199\u6210MySQL\u7684\u5173\u952e\u5b57\uff0c\u9ed8\u8ba4\u503c\u4e3a\u62a5\u8b66\u3002 enable_not_innodb false true,false \u5efa\u8868\u6307\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e3aInnodb\uff0c\u4e0d\u62a5\u9519 enable_nullable false true,false \u521b\u5efa\u6216\u8005\u65b0\u589e\u5217\u65f6\u5982\u679c\u5217\u4e3aNULL\uff0c\u662f\u4e0d\u662f\u62a5\u9519 enable_orderby_rand false true,false order by rand\u65f6\u662f\u4e0d\u662f\u62a5\u9519 enable_partition_table false true,false \u662f\u4e0d\u662f\u652f\u6301\u5206\u533a\u8868 enable_pk_columns_only_int false true,false \u662f\u5426\u5f3a\u5236\u4e3b\u952e\u5217\u5fc5\u987b\u662fint enable_select_star false true,false Select*\u65f6\u662f\u4e0d\u662f\u8981\u62a5\u9519 enable_set_charset false true,false \u662f\u5426\u5141\u8bb8\u6307\u5b9a\u8868\u548c\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6 lang v0.5.1 en-US en-US,zh-CN \u8fd4\u56de\u7684\u4fe1\u606f\u4f7f\u7528\u8bed\u8a00,\u53ef\u9009\u503c en-US , zh-CN max_char_length 0 int \u6700\u5927char\u957f\u5ea6,\u5f53\u8d85\u51fa\u65f6\u8b66\u544a\u8f6c\u6362\u4e3avarchar\u7c7b\u578b max_insert_rows v0.6.3 0 int \u8bbe\u7f6einsert values\u5141\u8bb8\u7684\u6700\u5927\u884c\u6570.0\u4e3a\u4e0d\u9650\u5236 max_key_parts 3 int \u4e00\u4e2a\u7d22\u5f15\u6700\u591a\u53ef\u6307\u5b9a\u7684\u5217\u6570 max_keys 3 int \u5355\u8868\u5141\u8bb8\u7684\u6700\u5927\u7d22\u5f15\u6570 max_primary_key_parts 3 int \u4e3b\u952e\u6700\u591a\u53ef\u6307\u5b9a\u7684\u5217\u6570 max_update_rows 5000 int \u5f53update/delete\u9884\u4f30\u53d7\u5f71\u54cd\u884c\u6570\u8d85\u51fa\u8bbe\u7f6e\u503c\u65f6\u8b66\u544a merge_alter_table false true,false \u5728\u591a\u4e2a\u6539\u540c\u4e00\u4e2a\u8868\u7684\u8bed\u53e5\u51fa\u73b0\u662f\uff0c\u62a5\u9519\uff0c\u63d0\u793a\u5408\u6210\u4e00\u4e2a must_have_columns v0.6.3 '' string \u7528\u4ee5\u6307\u5b9a\u5efa\u8868\u65f6\u5fc5\u987b\u521b\u5efa\u7684\u5217\u3002\u591a\u4e2a\u5217\u65f6\u4ee5\u9017\u53f7\u5206\u9694( \u683c\u5f0f: \u5217\u540d [\u5217\u7c7b\u578b,\u53ef\u9009] ) sql_safe_updates -1 -1,0,1 \u5b89\u5168\u66f4\u65b0.-1\u8868\u793a\u4e0d\u505a\u64cd\u4f5c,\u57fa\u4e8e\u8fdc\u7aef\u6570\u636e\u5e93,0\u8868\u793a\u5173\u95ed\u5b89\u5168\u66f4\u65b0,1\u8868\u793a\u5f00\u542f\u5b89\u5168\u66f4\u65b0 support_charset utf8,utf8mb4 string \u652f\u6301\u7684\u5b57\u7b26\u96c6\u96c6\u5408,\u591a\u4e2a\u5b57\u7b26\u96c6\u4ee5\u9017\u53f7\u5206\u9694","title":"\u652f\u6301\u53c2\u6570"},{"location":"osc/","text":"pt-online-schema-change \u4f7f\u7528\u524d\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u5b89\u88c5 percona-toolkit ( v3.0.4 \u6216\u53c2\u6570\u517c\u5bb9\u7248\u672c) \u4f7f\u7528\u524d\u9700\u8981\u6307\u5b9apt-osc\u76ee\u5f55\u53c2\u6570 osc_bin_dir \uff0c\u9ed8\u8ba4\u4e3a /usr/local/bin \u53c2\u6570\u8bbe\u7f6e pt-osc\u5de5\u5177\u7684\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53ef\u4ee5\u901a\u8fc7 inception show variables like 'osc%'; \u67e5\u770b inception show variables like 'osc%'; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set osc_check_interval = 10; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8 \u8fdb\u7a0b\u547d\u4ee4 \u67e5\u770bosc\u8fdb\u7a0b inception get osc processlist; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME COMMAND SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 alter table t1 add column c33 int *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 9 00:36 Copying test_inc . t1 : 9% 00:36 remain \u67e5\u770b\u6307\u5b9aosc\u8fdb\u7a0b inception get osc_percent '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 49 00:14 Copying test_inc . t1 : 49% 00:14 remain \u7ec8\u6b62\u6307\u5b9aosc\u8fdb\u7a0b \u7ec8\u6b62\u540e\u6ce8\u610f\u624b\u52a8\u6e05\u7406\u76f8\u5173\u8f85\u52a9\u8868 inception kill osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception stop alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e osc_on false bool OSC\u5f00\u5173 osc_alter_foreign_keys_method none string \u5bf9\u5e94OSC\u53c2\u6570alter-foreign-keys-method osc_bin_dir /usr/local/bin string pt-online-schema-change\u811a\u672c\u7684\u4f4d\u7f6e osc_check_alter true bool \u5bf9\u5e94\u53c2\u6570--[no]check-alter osc_check_interval 5 int \u5bf9\u5e94\u53c2\u6570--check-interval\uff0c\u610f\u4e49\u662fSleep time between checks for --max-lag. osc_check_replication_filters true bool \u5bf9\u5e94\u53c2\u6570--[no]check-replication-filters osc_chunk_size 1000 int \u5bf9\u5e94\u53c2\u6570--chunk-size osc_chunk_size_limit 4 int \u5bf9\u5e94\u53c2\u6570--chunk-size-limit osc_chunk_time 1 int \u5bf9\u5e94\u53c2\u6570--chunk-time osc_critical_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_critical_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_running\u90e8\u5206 osc_drop_new_table true bool \u5bf9\u5e94\u53c2\u6570--[no]drop-new-table osc_drop_old_table true bool \u5bf9\u5e94\u53c2\u6570--[no]drop-old-table osc_max_lag 3 int \u5bf9\u5e94\u53c2\u6570--max-lag osc_max_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_max_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_running\u90e8\u5206 osc_min_table_size 16 int OSC\u7684\u5f00\u5173\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u5168\u90e8ALTER\u8bed\u53e5\u90fd\u8d70OSC\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u975e0\uff0c\u5219\u5f53\u8fd9\u4e2a\u8868\u5360\u7528\u7a7a\u95f4\u5927\u5c0f\u5927\u4e8e\u8fd9\u4e2a\u503c\u65f6\u624d\u4f7f\u7528OSC\u65b9\u5f0f\u3002\u5355\u4f4d\u4e3aM\uff0c\u8fd9\u4e2a\u8868\u5927\u5c0f\u7684\u8ba1\u7b97\u65b9\u5f0f\u662f\u901a\u8fc7\u8bed\u53e5\uff1a select (DATA_LENGTH + INDEX_LENGTH)/1024/1024 from information_schema.tables where table_schema = \"dbname\" and table_name = \"tablename\"\u6765\u5b9e\u73b0\u7684\u3002 osc_print_none false bool \u7528\u6765\u8bbe\u7f6e\u5728Inception\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\uff0c\u5bf9\u4e8e\u539f\u6765OSC\u5728\u6267\u884c\u8fc7\u7a0b\u7684\u6807\u51c6\u8f93\u51fa\u4fe1\u606f\u662f\u4e0d\u662f\u8981\u6253\u5370\u5230\u7ed3\u679c\u96c6\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u5217\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u5c31\u4e0d\u6253\u5370\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5c31\u6253\u5370\u3002\u800c\u5982\u679c\u51fa\u73b0\u9519\u8bef\u4e86\uff0c\u5219\u90fd\u4f1a\u6253\u5370 osc_print_sql false bool \u5bf9\u5e94\u53c2\u6570--print osc_recursion_method processlist string \u5bf9\u5e94\u53c2\u6570recursion_method","title":"DDL\u53d8\u66f4:pt-osc"},{"location":"osc/#pt-online-schema-change","text":"\u4f7f\u7528\u524d\u9700\u8981\u624b\u52a8\u4e0b\u8f7d\u5b89\u88c5 percona-toolkit ( v3.0.4 \u6216\u53c2\u6570\u517c\u5bb9\u7248\u672c) \u4f7f\u7528\u524d\u9700\u8981\u6307\u5b9apt-osc\u76ee\u5f55\u53c2\u6570 osc_bin_dir \uff0c\u9ed8\u8ba4\u4e3a /usr/local/bin","title":"pt-online-schema-change"},{"location":"osc/#_1","text":"pt-osc\u5de5\u5177\u7684\u8bbe\u7f6e\u53c2\u6570\u53ef\u4ee5\u53ef\u4ee5\u901a\u8fc7 inception show variables like 'osc%'; \u67e5\u770b inception show variables like 'osc%'; \u652f\u6301\u4ee5\u4e0b\u65b9\u5f0f\u8bbe\u7f6e: 1.\u901a\u8fc7 inception set \u8bbe\u7f6e inception set osc_check_interval = 10; 2.\u914d\u7f6econfig.toml,\u5e76\u901a\u8fc7 -config=config.toml \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8","title":"\u53c2\u6570\u8bbe\u7f6e"},{"location":"osc/#_2","text":"","title":"\u8fdb\u7a0b\u547d\u4ee4"},{"location":"osc/#osc","text":"inception get osc processlist; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME COMMAND SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 alter table t1 add column c33 int *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 9 00:36 Copying test_inc . t1 : 9% 00:36 remain","title":"\u67e5\u770bosc\u8fdb\u7a0b"},{"location":"osc/#osc_1","text":"inception get osc_percent '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; \u8fd4\u56de\u7ed3\u679c\uff1a DBNAME TABLENAME SQLSHA1 PERCENT REMAINTIME INFOMATION test_inc t1 *E53542EFF4E179BE267210114EC5EDBEF9DC5D8F 49 00:14 Copying test_inc . t1 : 49% 00:14 remain","title":"\u67e5\u770b\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"osc/#osc_2","text":"\u7ec8\u6b62\u540e\u6ce8\u610f\u624b\u52a8\u6e05\u7406\u76f8\u5173\u8f85\u52a9\u8868 inception kill osc '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F'; -- \u6216\u540c\u4e49\u8bcd inception stop alter '*E53542EFF4E179BE267210114EC5EDBEF9DC5D8F';","title":"\u7ec8\u6b62\u6307\u5b9aosc\u8fdb\u7a0b"},{"location":"osc/#_3","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u53ef\u9009\u8303\u56f4 \u8bf4\u660e osc_on false bool OSC\u5f00\u5173 osc_alter_foreign_keys_method none string \u5bf9\u5e94OSC\u53c2\u6570alter-foreign-keys-method osc_bin_dir /usr/local/bin string pt-online-schema-change\u811a\u672c\u7684\u4f4d\u7f6e osc_check_alter true bool \u5bf9\u5e94\u53c2\u6570--[no]check-alter osc_check_interval 5 int \u5bf9\u5e94\u53c2\u6570--check-interval\uff0c\u610f\u4e49\u662fSleep time between checks for --max-lag. osc_check_replication_filters true bool \u5bf9\u5e94\u53c2\u6570--[no]check-replication-filters osc_chunk_size 1000 int \u5bf9\u5e94\u53c2\u6570--chunk-size osc_chunk_size_limit 4 int \u5bf9\u5e94\u53c2\u6570--chunk-size-limit osc_chunk_time 1 int \u5bf9\u5e94\u53c2\u6570--chunk-time osc_critical_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_critical_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--critical-load\u4e2d\u7684thread_running\u90e8\u5206 osc_drop_new_table true bool \u5bf9\u5e94\u53c2\u6570--[no]drop-new-table osc_drop_old_table true bool \u5bf9\u5e94\u53c2\u6570--[no]drop-old-table osc_max_lag 3 int \u5bf9\u5e94\u53c2\u6570--max-lag osc_max_thread_connected 1000 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_connected\u90e8\u5206 osc_max_thread_running 80 int \u5bf9\u5e94\u53c2\u6570--max-load\u4e2d\u7684thread_running\u90e8\u5206 osc_min_table_size 16 int OSC\u7684\u5f00\u5173\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5219\u5168\u90e8ALTER\u8bed\u53e5\u90fd\u8d70OSC\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a\u975e0\uff0c\u5219\u5f53\u8fd9\u4e2a\u8868\u5360\u7528\u7a7a\u95f4\u5927\u5c0f\u5927\u4e8e\u8fd9\u4e2a\u503c\u65f6\u624d\u4f7f\u7528OSC\u65b9\u5f0f\u3002\u5355\u4f4d\u4e3aM\uff0c\u8fd9\u4e2a\u8868\u5927\u5c0f\u7684\u8ba1\u7b97\u65b9\u5f0f\u662f\u901a\u8fc7\u8bed\u53e5\uff1a select (DATA_LENGTH + INDEX_LENGTH)/1024/1024 from information_schema.tables where table_schema = \"dbname\" and table_name = \"tablename\"\u6765\u5b9e\u73b0\u7684\u3002 osc_print_none false bool \u7528\u6765\u8bbe\u7f6e\u5728Inception\u8fd4\u56de\u7ed3\u679c\u96c6\u4e2d\uff0c\u5bf9\u4e8e\u539f\u6765OSC\u5728\u6267\u884c\u8fc7\u7a0b\u7684\u6807\u51c6\u8f93\u51fa\u4fe1\u606f\u662f\u4e0d\u662f\u8981\u6253\u5370\u5230\u7ed3\u679c\u96c6\u5bf9\u5e94\u7684\u9519\u8bef\u4fe1\u606f\u5217\u4e2d\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a1\uff0c\u5c31\u4e0d\u6253\u5370\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a0\uff0c\u5c31\u6253\u5370\u3002\u800c\u5982\u679c\u51fa\u73b0\u9519\u8bef\u4e86\uff0c\u5219\u90fd\u4f1a\u6253\u5370 osc_print_sql false bool \u5bf9\u5e94\u53c2\u6570--print osc_recursion_method processlist string \u5bf9\u5e94\u53c2\u6570recursion_method","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"params/","text":"\u4f7f\u7528\u793a\u4f8b goInception\u5ef6\u7528inception\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5728\u5ba1\u6838\u7684sql\u5f00\u59cb\u524d\u6dfb\u52a0\u6ce8\u91ca\u6765\u6307\u5b9a\u8fdc\u7aef\u670d\u52a1\u5668\uff0c\u5e76\u5728sql\u7684\u524d\u540e\u6dfb\u52a0\u7279\u6b8a\u6807\u8bc6\u4ee5\u533a\u5206\u5f85\u5ba1\u6838\u8bed\u53e5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit; \u9009\u9879\u5217\u8868 \u53c2\u6570 \u9ed8\u8ba4\u503c \u6570\u636e\u7c7b\u578b \u8bf4\u660e host '' string \u7ebf\u4e0a\u6570\u636e\u5e93IP\u5730\u5740 port 0 int \u7ebf\u4e0a\u6570\u636e\u5e93\u7aef\u53e3 user '' string \u7ebf\u4e0a\u6570\u636e\u5e93\u7528\u6237\u540d password '' string \u7ebf\u4e0a\u6570\u636e\u5e93\u5bc6\u7801 check false bool \u5f00\u542f\u5ba1\u6838\u529f\u80fd execute false bool \u5f00\u542f\u6267\u884c\u529f\u80fd backup false bool \u5f00\u542f\u5907\u4efd\u529f\u80fd\uff0c\u4ec5\u5728\u6267\u884c\u65f6\u751f\u6548 ignore_warnings false bool \u662f\u5426\u5ffd\u7565\u8b66\u544a\uff0c\u4ec5\u5728\u6267\u884c\u65f6\u751f\u6548\u3002\u8be5\u53c2\u6570\u63a7\u5236\u6709\u8b66\u544a\u65f6\u662f\u7ee7\u7eed\u6267\u884c\u8fd8\u662f\u4e2d\u6b62 fingerprint v0.6.2 false bool \u5f00\u542fsql\u6307\u7eb9\u529f\u80fd\u3002dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6","title":"\u8c03\u7528\u9009\u9879"},{"location":"params/#_1","text":"goInception\u5ef6\u7528inception\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u5728\u5ba1\u6838\u7684sql\u5f00\u59cb\u524d\u6dfb\u52a0\u6ce8\u91ca\u6765\u6307\u5b9a\u8fdc\u7aef\u670d\u52a1\u5668\uff0c\u5e76\u5728sql\u7684\u524d\u540e\u6dfb\u52a0\u7279\u6b8a\u6807\u8bc6\u4ee5\u533a\u5206\u5f85\u5ba1\u6838\u8bed\u53e5\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a /*--user=root;--password=root;--host=127.0.0.1;--check=1;--port=3306;*/ inception_magic_start; use test; create table t1(id int primary key); inception_magic_commit;","title":"\u4f7f\u7528\u793a\u4f8b"},{"location":"params/#_2","text":"\u53c2\u6570 \u9ed8\u8ba4\u503c \u6570\u636e\u7c7b\u578b \u8bf4\u660e host '' string \u7ebf\u4e0a\u6570\u636e\u5e93IP\u5730\u5740 port 0 int \u7ebf\u4e0a\u6570\u636e\u5e93\u7aef\u53e3 user '' string \u7ebf\u4e0a\u6570\u636e\u5e93\u7528\u6237\u540d password '' string \u7ebf\u4e0a\u6570\u636e\u5e93\u5bc6\u7801 check false bool \u5f00\u542f\u5ba1\u6838\u529f\u80fd execute false bool \u5f00\u542f\u6267\u884c\u529f\u80fd backup false bool \u5f00\u542f\u5907\u4efd\u529f\u80fd\uff0c\u4ec5\u5728\u6267\u884c\u65f6\u751f\u6548 ignore_warnings false bool \u662f\u5426\u5ffd\u7565\u8b66\u544a\uff0c\u4ec5\u5728\u6267\u884c\u65f6\u751f\u6548\u3002\u8be5\u53c2\u6570\u63a7\u5236\u6709\u8b66\u544a\u65f6\u662f\u7ee7\u7eed\u6267\u884c\u8fd8\u662f\u4e2d\u6b62 fingerprint v0.6.2 false bool \u5f00\u542fsql\u6307\u7eb9\u529f\u80fd\u3002dml\u8bed\u53e5\u76f8\u4f3c\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u76f8\u540c\u7684\u6307\u7eb9ID\u590d\u7528explain\u7ed3\u679c\uff0c\u4ee5\u51cf\u5c11\u8fdc\u7aef\u6570\u636e\u5e93explain\u64cd\u4f5c\uff0c\u5e76\u63d0\u9ad8\u5ba1\u6838\u901f\u5ea6","title":"\u9009\u9879\u5217\u8868"}]}